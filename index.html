<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Up and Running with Angular Workshop</title>


	<meta charset="utf-8">
	<meta name="description" content="Up and Running with Angular Workshop">
	<meta name="author" content="Justin James">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="css/style.css" rel="stylesheet">
</head>

<body>

	<div id="tutorial-container">
		<div id="header">
			<a href="#" class="menu header-btn" id="toggle-toc"></a>
			<h1>Up and Running with Angular Workshop</h1>
			<a href="https://github.com/digitaldrummerj/angular-tutorial" class="github header-btn"></a>
		</div>
		<div id="tutorial-content-container">
			<div id="toc">
				<div class="toc-heading">Table of Contents</div>
				<div id="toc-padding"></div>
			</div>
			<div id="book">
				<div class="chapter">
					<h2 id="overview">Overview</h2>
<p>Welcome to the Up and Running with Angular Workshop.  Angular 2 was released in September 2016 and was a full re-write of the framework.  With the re-write a lot has changed.   In this workshop, you will learn how to build an Angular UI from the ground up.  </p>
<div class="alert alert-danger" role="alert">This workshop has been tested against Angular 4.2.3</div>

<h3 id="goal">Goal</h3>
<p>The goal of this tutorial is to walk you through creating an application with the common features that a web application would have (headers, footers, forms, calls to API services, authentication, etc).  </p>
<p>The tutorial is designed to be gone through from start to finish to build the application as the chapters build on each other.  </p>
<p>For each chapter there is a start and complete branch in Github that you can pull down if you need it.  </p>
<h3 id="new-naming-convention">New Naming Convention</h3>
<p>The first thing is what to call Angular.  Angular 1 is now referred to as AngularJS.  Angular 2 and above is referred to as just Angular.  From here on out, we will just call it Angular.  The only time to refer to Angular with a version number is when you are talking about a feature that it specific to that version.  For example, in Angular 4, they add the TitleCase Pipe and an email validator.</p>
<h3 id="release-schedule">Release Schedule</h3>
<p>The second thing is that they are now following SemVer for the versioning of Angular and have a release schedule.  For example, here is how version 2.3.1 would break down.</p>
<p><img src="images/semver.png" alt="SemVer"></p>
<p>Release Schedule:</p>
<ul>
<li>Major: Every 6 months</li>
<li>Minor: Every month</li>
<li>Patch: Every week</li>
</ul>
<h3 id="coming-from-angular-1">Coming from Angular 1</h3>
<p>Third, if you are coming from an AngularJS background, it is best if you do not try to compare the concepts between AngularJS and Angular.  Just treat Angular as a whole new framework.  </p>
<h3 id="using-this-tutorial">Using This Tutorial</h3>
<h4 id="collapse-chapter-list">Collapse Chapter List</h4>
<p>If you click on the hamburger icon in the header (left icon with the 3 lines), it will toggle the view of the chapters so that you have more room to view the tutorial.</p>
<h4 id="copy-code-snippets">Copy Code Snippets</h4>
<p>Every code snippet has a copy button on the right side of the snippet that will put the code onto the clipboard for you to paste into your code.</p>
<h4 id="found-an-issue-with-tutorial">Found An Issue with Tutorial</h4>
<p>If we are doing this tutorial in person as part of a class or workshop, please flag me down and let me know.</p>
<p>If you are going through this tutorial online by yourself, click on the github icon in the header (right icon) and log an issue so that I can take a look at it.</p>

				</div>
				<hr>
				<div class="chapter">
					<h2 id="getting-up-and-running">Getting up and running</h2>
<h3 id="overview">Overview</h3>
<p>To get started, we need to install and configure the following software first.</p>
<ul>
<li>Supported Platforms: Windows, Mac, or Linux computer</li>
<li>Editor: Visual Studio Code (can use any text editor but workshop tested with Visual Studio Code)</li>
<li>Software:<ul>
<li>Node 6.9+</li>
<li>Angular CLI</li>
</ul>
</li>
</ul>
<h3 id="goals">Goals</h3>
<ul>
<li>Setup your machine for the Workshop</li>
</ul>
<h3 id="windows-showing-file-extensions">Windows Showing File Extensions</h3>
<div class="alert alert-danger" role="alert">
<strong>Windows Only</strong> 
</div>

<p><strong>Non-Windows users can <a href="#chapter2.4">skip to next section</a></strong></p>
<p>By default Windows is set to not show file extensions for known files which causes files such as .gitconfig and .npmrc to show up as just a period with no file extension which makes it extremely difficult to figure out what the file actually is.  To fix this we need to turn set Windows Explorer to show file extensions.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Turn On Windows Showing File Extensions
</h4>

<ol>
<li>Open Windows Explorer</li>
<li><p>Click on the View Tab and select Options</p>
<p> <img src="images/chapter1/windows-explorer-ribbon.png" style="height:147px;width:759px;margin-left: 10px"></p>
</li>
</ol>
<p>Once the &quot;Folder Options&quot; dialog is open: </p>
<ol>
<li>Click on the View Tab</li>
<li>Uncheck the &quot;Hide extensions for known file types&quot;</li>
<li><p>Click Ok</p>
<p> <img src="images/chapter1/windows-explorer-view-options.png" style="height:475px;width:382px;margin-left: 10px"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="visual-studio-code">Visual Studio Code</h3>
<p>Visual Studio Code is Microsoft lightweight cross platform IDE.  </p>
<ol>
<li>Download Visual Studio Code at <a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a></li>
<li>Once the download finishes, launch the installer, and except all of the defaults.</li>
</ol>
<h3 id="node-js">Node.js</h3>
<p>NodeJS is used to power the Angular CLI as well as install all of our dependencies.  The Angular CLI requires Node version 6.9 or greater.</p>
<ol>
<li>Download the latest stable version (LTS) of <a href="http://nodejs.org">NodeJS</a> which as of this writing is 6.11.0.    </li>
<li>Run the installer and accept all defaults.</li>
<li>Verify that Node installed.  Start a command prompt or terminal window and run: </li>
</ol>
<h4 class="exercise-start">
    <b>Exercise</b>: Verify Node Install
</h4>

<pre><code class="lang-bash">node -v
</code></pre>
<div class="exercise-end"></div>

<h3 id="angular-cli-install">Angular CLI Install</h3>
<p>The Angular CLI (Command Line Interface) makes it so that you do not have to worry about the Angular tooling and can focus instead on your code. You can create new projects, components, modules, services, guards, pipes and routes.  As well it has commands for linting, testing and running our code.  </p>
<p>All of the code that is generated by the Angular CLI following the Angular Style Guide.  </p>
<p>While you do not have to use the Angular CLI, it is highly recommended, will increase your productivity, and this workshop only gives the instructions for developing with the Angular CLI.  </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Install Angular CLI
</h4>

<div class="alert alert-info" role="alert">This workshop has been tested against Angular CLI 1.2.0</div>

<ol>
<li><p>Open a command prompt or terminal and run the following command</p>
<pre><code class="lang-bash"> npm install -g @angular/cli
</code></pre>
</li>
<li><p>Verify Angular CLI</p>
<pre><code> ng --version
</code></pre><p> <img src="images/chapter1/ng-version.png" alt="ng version output"></p>
</li>
</ol>
<div class="exercise-end"></div>

				</div>
				<hr>
				<div class="chapter">
					<h2 id="create-new-project">Create New Project</h2>
<h3 id="overview">Overview</h3>
<p>In this chapter we will be creating our project with the Angular CLI.  We will use this project throughout the workshop.</p>
<h3 id="goals">Goals</h3>
<ul>
<li>Understand how to create a new project</li>
<li>Understand how to find help for an Angular CLI command</li>
<li>Understand the project layout</li>
<li>Understand how to run the project</li>
</ul>
<h3 id="generate-new-project">Generate New Project</h3>
<p>The project that the Angular CLI create for you follows all of the suggested standards and has webpack for bundling built-in to it.    </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create Angular Project
</h4>

<ol>
<li>Open a command prompt</li>
<li><p>Navigate to where you want to store your project files.  I use c:\projects on Windows and ~/projects on OSx.  You are free to use anywhere that you want. </p>
<ul>
<li><p>Windows:</p>
<pre><code class="lang-bash">  cd \
</code></pre>
</li>
<li><p>OSx:</p>
<pre><code class="lang-bash">  cd ~/
</code></pre>
</li>
</ul>
</li>
<li><p>Create the projects directory.  If you already have a directory that you store your projects in then you can skip this step.</p>
<pre><code class="lang-bash"> mkdir projects
</code></pre>
</li>
<li><p>Navigate into the projects directory</p>
<pre><code class="lang-bash"> cd projects
</code></pre>
</li>
<li><p>Generate a project named ngws that uses scss for styling and includes a routing file by running</p>
<pre><code class="lang-bash"> ng new ngws --style scss --routing
</code></pre>
<p> <strong>Sample Output:</strong>
 <img src="images/ng-new.png" alt="ng new"></p>
</li>
<li><p>If you want to see the other ng new options or any Angular CLI command append the --help</p>
<pre><code class="lang-bash"> ng new --help
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="opening-project-in-visual-studio-code">Opening Project in Visual Studio Code</h3>
<ol>
<li>Open Visual Studio Code</li>
<li>Click File -&gt; Open Folder...</li>
<li>Navigate to angular-tutorial directory and click Select Folder </li>
<li><p>Your project should now be opened in Visual Studio Code</p>
<p> <img src="images/project-layout.png" alt="Project Layout"></p>
</li>
</ol>
<h3 id="running-project">Running Project</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Run the project
</h4>

<p>The Angular CLI has a built-in command for starting up a web server for your project called <code>ng serve</code> which will run webpack to bundle up your code, start the web server, rebuild on file changes (watch) and refresh connected browsers (live reload).</p>
<ol>
<li>Visual Studio Code has a built-in terminal that we can use to run our commands.  On Windows, this is a powershell prompt.  To open the Integrated Terminal go under the View Menu and click on the Integrate Terminal or press Ctrl+`<ul>
<li>You are free to use the regular command prompt outside of Visual Studio Code if you would like</li>
</ul>
</li>
<li><p>Run</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
<p> <img src="images/ng-serve.png" alt="ng serve output"></p>
 <div class="alert alert-info" role="alert">The ng serve command will stay running in order to provide live reloading functionality.  If you need to stop ng serve, press ctrl+c</div>
</li>
<li><p>If you launch your browser and navigate to <a href="http://localhost:4200">http://localhost:4200</a>, you will see a page that looks like</p>
<p> <img src="images/appworks.png" alt="app works"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="navigating-around-visual-studio-code">Navigating around Visual Studio Code</h3>
<p>Being able to effectively use your editor is key to being a super productive developer.  With Visual Studio Code, there are several shortcut keys that will help you out.</p>
<table>
<thead>
<tr>
<th>Purpose</th>
<th>Key</th>
</tr>
</thead>
<tbody>
<tr>
<td>Integrated Terminal</td>
<td>ctrl+`</td>
</tr>
<tr>
<td>Open File</td>
<td>ctrl+p</td>
</tr>
<tr>
<td>Switch Between Files</td>
<td>ctrl+tab</td>
</tr>
<tr>
<td>Switch Between Files Reverse</td>
<td>ctrl+shift+tab</td>
</tr>
<tr>
<td>Hide Side Menu</td>
<td>ctrl+b</td>
</tr>
<tr>
<td>Toggle Word Wrap for File</td>
<td>alt+z</td>
</tr>
<tr>
<td>Format Document</td>
<td>ctrl+alt+f</td>
</tr>
</tbody>
</table>
<div class="alert alert-info" role="alert"> I also split my screen in half with the tutorial on one side and the editor on the other side.  On Windows you can do this by using the win key + left arrow for the one you want on the left and then select the other for the right when windows prompts you.  You can also use win key + right arrow to make a Windows use half the screen on the right.</div>

<h3 id="visual-studio-settings">Visual Studio Settings</h3>
<p>In Visual Studio Code, you will notice that there is a map looking thing showing in the upper right corner.  This is called the mini map and it is a layout of your source code file.  I typically hide the mini map to give myself more editing space.  </p>
<h4 class="exercise-start">
  <b>Exercise</b>: Hide Mini Map
</h4>

<p>To hide the mini map go into the Preferences -&gt; Settings (File -&gt; Preferences -&gt; Settings on Windows) and add the following setting</p>
<pre><code class="lang-bash">&quot;editor.minimap.enabled&quot;: false,
</code></pre>
<div class="exercise-end"></div>



<h4 class="exercise-start">
  <b>Exercise</b>: Turn On Word Wrap
</h4>

<p>I also like to always have word wrap turned on.  You can turn this on in the same preferences file as you used for turning off the mini map above.</p>
<pre><code class="lang-bash">&quot;editor.wrappingIndent&quot;: &quot;same&quot;,
</code></pre>
<div class="exercise-end"></div>

<h3 id="review">Review</h3>
<p>In this chapter we learned 3 things</p>
<ol>
<li>How to create a new projects using the <code>ng new</code> command</li>
<li>What the project layout looks like for an Angular project generated with the CLI</li>
<li>How to run our project with the <code>ng serve</code> command and view it at <a href="http://localhost:4200">http://localhost:4200</a></li>
</ol>

				</div>

				<hr>
				<div class="chapter">
					<h2 id="bootstrap">Bootstrap</h2>
<h3 id="overview">Overview</h3>
<p>For our styling we are going to use <a href="https://v4-alpha.getbootstrap.com/">Bootstrap 4</a> which is still in alpha.  The reason for picking Bootstrap 4 and not Bootstrap 3 is so that we can use <a href="https://ng-bootstrap.github.io">Angular Bootstrap library (ng-bootstrap)</a>.  ng2-bootstrap is written 100% in JavaScript with no need for JQuery or Bootstrap&#39;s JavaScript library to be included.</p>
<h3 id="goals">Goals</h3>
<ul>
<li>Understand how to include Bootstrap 4 into your project</li>
</ul>
<h3 id="install-bootstrap">Install Bootstrap</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Install Bootstrap
</h4>

<ol>
<li>In the VS Code Integrated Terminal, click the + to open a 2nd terminal</li>
<li><p>Run the npm install command for bootstrap and font-awesome</p>
<pre><code class="lang-bash"> npm install --save bootstrap@next font-awesome @ng-bootstrap/ng-bootstrap
</code></pre>
<ul>
<li>This will install ng-bootstrap along with bootstrap and font-awesome.  Bootstrap is still required for ng-bootstrap to work.  </li>
</ul>
</li>
</ol>
<p>Before we can use ng-bootstrap we need to add it to the AppModule</p>
<ol>
<li><p>Open the src\app\app.module.ts</p>
<pre><code class="lang-bash"> app.module.ts
</code></pre>
</li>
<li><p>Import the NgbModule from @ng-bootstrap/ng-bootstrap library</p>
<pre><code class="lang-TypeScript"> import {NgbModule} from &#39;@ng-bootstrap/ng-bootstrap&#39;;
</code></pre>
</li>
<li><p>In the @NgModule imports section add NgbModule.forRoot()</p>
<pre><code class="lang-TypeScript"> NgbModule.forRoot()
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-bootstrap-to-project">Add Bootstrap to Project</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Add  Bootstrap to Project
</h4>

<p>First we need to create our own custom Bootstrap stylesheet so that we can override the Bootstrap scss variables to create our own colors and styles using the existing Bootstrap scss variables.  </p>
<ol>
<li><p>In the src\assets folder, create a new folder named <strong>bootstrap</strong></p>
   <div class="alert alert-info" role="alert">You can create folder right in Visual Studio Code by right-click on the src\assets folder</div>

<pre><code class="lang-bash"> bootstrap
</code></pre>
</li>
<li><p>In the bootstrap folder, create a file called <strong>_variables.scss</strong></p>
   <div class="alert alert-info" role="alert">You can create file right in Visual Studio Code by right-click on the src\assets folder</div>

<pre><code class="lang-bash"> _variables.scss
</code></pre>
</li>
<li><p>Add the following to the _variables.scss file</p>
<pre><code class="lang-scss"> // Variables
 // Colors
 //
 // Grayscale and brand colors for use across Bootstrap.
 $dark-blue: #003C71;

 // Start with assigning color names to specific hex values.
 $white:  #fff !default;
 $black:  #000 !default;
 $red:    #d9534f !default;
 $orange: #f0ad4e !default;
 $yellow: #ffd500 !default;
 $green:  #5cb85c !default;
 $blue:   #0275d8 !default;
 $teal:   #5bc0de !default;
 $pink:   #ff5b77 !default;
 $purple: #613d7c !default;

 // Create grayscale
 $gray-dark:                 #292b2c !default;
 $gray:                      #464a4c !default;
 $gray-light:                #636c72 !default;
 $gray-lighter:              #eceeef !default;
 $gray-lightest:             #f7f7f9 !default;

 // Reassign color vars to semantic color scheme
 $brand-primary:             $blue !default;
 $brand-success:             $green !default;
 $brand-info:                $teal !default;
 $brand-warning:             $orange !default;
 $brand-danger:              $red !default;
 $brand-inverse:             $gray-dark !default;
</code></pre>
</li>
<li><p>In the bootstrap folder, create a file called <strong>bootstrap.scss</strong></p>
<pre><code class="lang-bash"> bootstrap.scss
</code></pre>
</li>
<li><p>Add the following contents to the bootstrap.scss file. </p>
   <div class="alert alert-info" role="alert">Note that the list of included files outside of the variables file is the same as the ones in the  node_modules\bootstrap\scss\bootstrap.scss file with a ~bootstrap/scss prefix so that the scss compiler is able to find the included file in the node_modules\bootstrap\scss directory.</div>

<pre><code class="lang-scss"> @import &quot;variables&quot;;

 @import &quot;~bootstrap/scss/variables&quot;;
 @import &quot;~bootstrap/scss/mixins&quot;;
 @import &quot;~bootstrap/scss/custom&quot;;

 // Reset and dependencies
 @import &quot;~bootstrap/scss/normalize&quot;;
 @import &quot;~bootstrap/scss/print&quot;;

 // Core CSS
 @import &quot;~bootstrap/scss/reboot&quot;;   
 @import &quot;~bootstrap/scss/type&quot;;
 @import &quot;~bootstrap/scss/images&quot;;
 @import &quot;~bootstrap/scss/code&quot;;
 @import &quot;~bootstrap/scss/grid&quot;;
 @import &quot;~bootstrap/scss/tables&quot;;
 @import &quot;~bootstrap/scss/forms&quot;;
 @import &quot;~bootstrap/scss/buttons&quot;;

 // Components
 @import &quot;~bootstrap/scss/transitions&quot;;
 @import &quot;~bootstrap/scss/dropdown&quot;;
 @import &quot;~bootstrap/scss/button-group&quot;;
 @import &quot;~bootstrap/scss/input-group&quot;;
 @import &quot;~bootstrap/scss/custom-forms&quot;;
 @import &quot;~bootstrap/scss/nav&quot;;
 @import &quot;~bootstrap/scss/navbar&quot;;
 @import &quot;~bootstrap/scss/card&quot;;
 @import &quot;~bootstrap/scss/breadcrumb&quot;;
 @import &quot;~bootstrap/scss/pagination&quot;;
 @import &quot;~bootstrap/scss/badge&quot;;
 @import &quot;~bootstrap/scss/jumbotron&quot;;
 @import &quot;~bootstrap/scss/alert&quot;;
 @import &quot;~bootstrap/scss/progress&quot;;
 @import &quot;~bootstrap/scss/media&quot;;
 @import &quot;~bootstrap/scss/list-group&quot;;
 @import &quot;~bootstrap/scss/responsive-embed&quot;;
 @import &quot;~bootstrap/scss/close&quot;;

 // Components w/ JavaScript
 @import &quot;~bootstrap/scss/modal&quot;;
 @import &quot;~bootstrap/scss/tooltip&quot;;
 @import &quot;~bootstrap/scss/popover&quot;;
 @import &quot;~bootstrap/scss/carousel&quot;;

 // Utility classes
 @import &quot;~bootstrap/scss/utilities&quot;;

 /*
 * Font Awesome 4.x
 */
 $fa-font-path: &quot;~font-awesome/fonts&quot;;
 @import &quot;~font-awesome/scss/font-awesome&quot;;
</code></pre>
</li>
</ol>
<p>Now we need to configure the angular cli to import the bootstrap libraries.  </p>
<ol>
<li><p>Open the <strong>.angular-cli.json</strong> file that is in the root of the project.  This file  is the configuration file for our project for the Angular CLI </p>
 <div class="alert alert-info" role="alert">In Visual Studio Code you can quickly open a file by using ctrl+p to open the &quot;Go To File&quot; prompt and typing in the file name</div>

<pre><code class="lang-bash"> .angular-cli.json
</code></pre>
</li>
<li><p>Find the apps\styles section and replace the section with:  </p>
<pre><code class="lang-TypeScript">   &quot;styles&quot;: [
     &quot;assets/bootstrap/bootstrap.scss&quot;,
      &quot;styles.scss&quot;
   ],
</code></pre>
   <div class="alert alert-info" role="alert">If the code alignment upon paste is off you can run the &quot;Format Document&quot; command to fix it.  Ctrl+Shift+P and search for &quot;Format Document&quot; or use Alt+Shift+F</div>

</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-banner-section-to-top">Add Banner Section to Top</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Banner To Top of Page
</h4>

<ol>
<li><p>Open src\app\app.component.html</p>
<pre><code class="lang-bash"> app.component.html
</code></pre>
</li>
<li><p>Replace the contents with:</p>
<pre><code class="lang-html"> &lt;div class=&quot;jumbotron&quot;&gt;
     &lt;div class=&quot;container&quot;&gt;
         &lt;h1&gt;{{title}}&lt;/h1&gt;
     &lt;/div&gt;
 &lt;/div&gt;
 &lt;div class=&quot;container&quot;&gt;
     &lt;router-outlet&gt;&lt;/router-outlet&gt;
 &lt;/div&gt;
</code></pre>
</li>
<li><p>Lets change the title to something better than &quot;App Works!&quot;</p>
<ul>
<li>Open the src\app\app.component.ts file</li>
<li><p>On line 9, change the title variable to</p>
<pre><code class="lang-TypeScript">  title = &#39;Our Awesome Todo App!&#39;;
</code></pre>
</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="view-changes">View Changes</h3>
<div class="alert alert-danger" role="alert">Since we already had ng serve running, it picked up the html changes but you will notice that there is no styling.  This is because whenever you change the .angular-cli.json file, you need to restart ng serve before they take effect.</div>

<h4 class="exercise-start">
    <b>Exercise</b>: Restart ng serve
</h4>

<ol>
<li><p>Go to the integrated terminal in Visual Studio Code that is running the <code>ng serve</code> command and do a ctrl+c to stop it.</p>
<blockquote>
<p>There is a dropdown on the right side of the Visual Studio Code integrated terminal that allows you to change to the other terminals that are currently open for your project</p>
</blockquote>
</li>
<li><p>Run the <code>ng serve</code> command again.</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
<li><p>The web page should now look like</p>
<p> <img src="images/bootstrap-jumbotron.png" alt="App Works with Bootstrap"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="review">Review</h3>
<p>In this chapter we learned how to use Bootstrap for our project.  </p>
<p>Learned:</p>
<ol>
<li>How to install Bootstrap 4 and font-awesome</li>
<li>How to integrate it into the Angular CLI in the .angular-cli.json file</li>
<li>How to create our own custom Bootstrap SCSS variables to override the built-in styles of Bootstrap with our own colors</li>
<li>How to create a banner at the top of the page</li>
<li>How to change the text that appears in the banner using our TypeScript title variable</li>
<li>Learned that when you modify the .angular-cli.json file that you have to restart <code>ng serve</code> for the changes to take effect</li>
</ol>

				</div>
				<hr>

				<div class="chapter">
					<h2 id="template-based-forms">Template Based Forms</h2>
<h3 id="overview">Overview</h3>
<p>There are 2 options for creating forms within Angular: Template based and Model based.  This chapter will cover template based forms.</p>
<p>Template based forms are simple and easy to use.  They are great for simple use cases.  However, there are some limitations with template  based forms: 1.) You end up with a lot of logic in your html code 2.) Cross field validation is more difficult 3.) You can not unit test your form and validation logic.</p>
<p>To demonstrate template based forms, we are going to be build a login component.</p>
<h3 id="goals">Goals</h3>
<ul>
<li>Understand template based forms</li>
<li>Create template based form</li>
<li>Implement input validation</li>
<li>Submit form values to a service</li>
</ul>
<h3 id="code-from-previous-chapter">Code from Previous Chapter</h3>
<div class="alert alert-danger" role="alert">Skip this section if you completed the previous chapter</div>

<p>If you have not completed the previous chapter you can get the completed code by downloading the code from Github.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Downloading Code 
</h4>

<ol>
<li>Downloading and extracting the zip file into your projects folder (c:\projects or ~/projects) at <a href="https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-bootstrap.zip">https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-bootstrap.zip</a> </li>
<li><p>After you get the code, run npm install to get all of the NPM dependencies.</p>
<pre><code class="lang-bash"> npm install
</code></pre>
</li>
<li><p>Open Visual Studio Code</p>
</li>
<li>In Visual Studio Code, go under the File menu, select Open folder and navigate to the folder that you unzipped the files into</li>
<li>If you have ng serve running in a different editor, make sure to stop it from running.</li>
<li><p>Open the Integrated Terminal in Visual Studio Code (ctrl + `)  and run ng serve</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="create-login-component">Create Login Component</h3>
<p>The first thing we need to do is to create our login component using the Angular CLI.  We will use the <code>ng generate component</code> command to do this.  </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create Login  Component 
</h4>

<ol>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li><p>Run the ng generate command below to create the login component</p>
<pre><code class="lang-bash"> ng generate component login
</code></pre>
</li>
<li><p>The generate command will create 4 files: </p>
<p> <img src="images/login-generate.png" alt="output of generate"></p>
<ul>
<li>scss (styles)</li>
<li>html (view)</li>
<li>spec file (test)</li>
<li>component (controller)</li>
<li>add reference to the component in the app.module.ts file.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-route">Add Route</h3>
<p>In order to view our Login component we need to tell Angular how to route to it.  We are going to add a route at &#39;/login&#39; to the LoginComponent.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Login Routing 
</h4>

<p>Before we can view our Login component, we need to tell Angular how to route to the component</p>
<ol>
<li><p>Open the src\app\app-routing.module.ts file</p>
<pre><code class="lang-bash"> app-routing.module.ts
</code></pre>
</li>
<li><p>You need to import the LoginComponent before we can reference it.  On line 3, add the following statement</p>
<pre><code class="lang-TypeScript"> import { LoginComponent } from &#39;./login/login.component&#39;;
</code></pre>
</li>
<li><p>In the routes array, we need to add another array item to be able to route to the LoginComponent. Add the following at the end of line 9</p>
<pre><code class="lang-TypeScript"> ,
 { path: &#39;login&#39;, children: [], component: LoginComponent }
</code></pre>
</li>
<li><p>Your routes should look like the following</p>
<pre><code class="lang-TypeScript"> const routes: Routes = [
     {
         path: &#39;&#39;,
         children: []
     },
     { path: &#39;login&#39;, children: [], component: LoginComponent }
 ];
</code></pre>
</li>
<li><p>The Login page should display when you navigate to <a href="http://localhost:4200/login">http://localhost:4200/login</a></p>
<p> <img src="images/login-initial-view.png" alt="login initial view"></p>
 <div class="alert alert-info" role="alert"><strong>Note:</strong> When you navigate to the login route, the LoginComponent is loaded into the <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> in the html in  src\app\app.component.html.  The router-outlet tag is how Angular knows where to put the rendered content for the route.</div>

</li>
</ol>
<div class="exercise-end"></div>


<h3 id="create-form">Create Form</h3>
<p>Next we are going to create the form without any validation logic at all.  Our form will have 2 input fields:  email and password and 2 buttons: submit and cancel.  We will use Bootstrap for the styling and Angular for the validation.</p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Creating the Form
</h4>

<ol>
<li><p>Open src\app\login\login.component.html</p>
<pre><code class="lang-bash"> login.component.html
</code></pre>
</li>
<li><p>Replace the existing html with the following</p>
<pre><code class="lang-html"> &lt;h1&gt;Login&lt;/h1&gt;
 &lt;hr&gt;
 &lt;div&gt;
     &lt;form autocomplete=&quot;off&quot; novalidate&gt;
         &lt;div class=&quot;form-group&quot;&gt;
             &lt;label for=&quot;email&quot;&gt;Email:&lt;/label&gt;
             &lt;input name=&quot;email&quot; id=&quot;email&quot; type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Email...&quot; /&gt;
         &lt;/div&gt;
         &lt;div class=&quot;form-group&quot;&gt;
             &lt;label for=&quot;password&quot;&gt;Password:&lt;/label&gt;
             &lt;input name=&quot;password&quot; id=&quot;password&quot; type=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password...&quot; /&gt;
         &lt;/div&gt;
         &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Login&lt;/button&gt;
         &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Cancel&lt;/button&gt;
     &lt;/form&gt;
 &lt;/div&gt;
</code></pre>
<ul>
<li>This form is using Bootstrap for the styling with the form-group, form-control btn, and btn-* css classes.</li>
<li>The autocomplete=&quot;off&quot; and novalidate directives for the form tag tell the browser to turn off that built-in functionality so that we can do our validation with Angular.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="handle-form-submission">Handle Form Submission</h3>
<p>In order to submit the form we need to tell Angular that that login form is an ngForm and use the ngSubmit event to tell Angular what to do when the form submit button is clicked.</p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Import Angular FormsModule
</h4>

<p>Before we can interact with our form using Angular, we need to import the FormsModule into our application.</p>
<ol>
<li><p>Open src\app\app.module.ts</p>
<pre><code class="lang-bash"> app.module.ts
</code></pre>
</li>
<li><p>Add an import statement for FormsModule from @angular/forms</p>
<pre><code class="lang-TypeScript"> import { FormsModule } from &#39;@angular/forms&#39;;
</code></pre>
</li>
<li><p>Before we can use the imported module, we need to add it to the @NgModule declaration in the imports array.  We are going to add it between the BrowserModule and AppRoutingModule.</p>
<pre><code class="lang-TypeScript"> FormsModule,
</code></pre>
</li>
<li><p>Your @NgModule imports section should now look like:</p>
<pre><code class="lang-TypeScript"> imports: [
     BrowserModule,
     FormsModule,
     AppRoutingModule
 ],
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>:  Add login function
</h4>

<ol>
<li><p>Go back to the login.component.html file</p>
<pre><code class="lang-bash"> login.component.html
</code></pre>
</li>
<li><p>On the <code>&lt;form&gt;</code> tag we need to add 2 additional attributes to create a reference variable to the form and handle the form submit.  </p>
<pre><code class="lang-html"> #loginForm=&quot;ngForm&quot; (ngSubmit)=&quot;login(loginForm.value)&quot;
</code></pre>
<ul>
<li>The #loginForm creates a variable called loginForm that reference ngForm.  This will allow us to reference the loginForm in the login.component.ts file. </li>
<li>The ngSubmit upon form submit event will call the login function in the login.component.ts file and pass the loginForm.value into it.  The loginForm.value holds the values for the form fields.</li>
</ul>
</li>
</ol>
<p>In order to be able to access all of the form field values by using <code>loginForm.value</code> we need tdo add an <code>(ngModel)=&quot;NAME&quot;</code> attribute onto each field, replacing &quot;NAME&quot; with the name that we want to refer to the field as.</p>
<ol>
<li><p>On the email input field we need to add an attribute to tell Angular to implement 1 way binding on the field by using the <code>(ngModel)</code> attribute</p>
<pre><code class="lang-html"> (ngModel)=&quot;email&quot;
</code></pre>
</li>
<li><p>On the password field we are going to do the same thing that we just did to the email field.  </p>
<pre><code class="lang-html"> (ngModel)=&quot;password&quot;
</code></pre>
</li>
</ol>
<p>Now that the basics of the form have been created, we are ready handle the form submit event and implement the login function that <code>(ngSubmit)</code> is calling.  </p>
<ol>
<li><p>Open the login.component.ts file</p>
<pre><code class="lang-bash"> login.component.ts
</code></pre>
</li>
<li><p>Inside of the LoginComponent class after the ngOnInit, add the following function.  For now we are just going to output the form values to the Developer Tools console in the browser. </p>
<pre><code class="lang-TypeScript"> login(formValues) {
     console.log(formValues);
 }
</code></pre>
</li>
<li><p>In your browser, while viewing the login form at <a href="http://localhost:4200/login">http://localhost:4200/login</a> open the developer tools and click the console tab so that you can see the console output.    </p>
</li>
<li><p>Now enter a value into the email and password fields and click the submit button.  You will see output similar to the below image where I entered the email of email@gmail.com and password of 123456</p>
<p> <img src="images/login-submit-console.png" alt="login console output"></p>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="implement-login-service">Implement Login Service</h3>
<p>Now that we have our form done, we are going to implement our login service.</p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Generate Service
</h4>

<ol>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li><p>Run the ng generate command below to create the Authorization service.  I like to store my services under a shared\services folder.</p>
<pre><code class="lang-bash"> ng generate service shared/services/auth --module App
</code></pre>
</li>
<li><p>The generate command will create 2 files and update app.module.ts: </p>
<p> <img src="images/login-service-generate.png" alt="output of generate"></p>
<ul>
<li>spec file (test)</li>
<li>typescript (service)</li>
<li>updated app.module.ts to add LoginService as a provider</li>
</ul>
</li>
</ol>
<p>Before we can make HTTP calls in our AuthService, we need to import the HttpModule into your AppModule</p>
<ol>
<li><p>Open the app.module.ts file</p>
<pre><code class="lang-bash"> app.module.ts
</code></pre>
</li>
<li><p>Add an import statement for the HttpModule that comes from @angular/http</p>
<pre><code class="lang-TypeScript"> import { HttpModule } from &#39;@angular/http&#39;;
</code></pre>
</li>
<li><p>In the @NgModule imports array add the HttpModule</p>
<pre><code class="lang-TypeScript"> HttpModule,
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Implement Auth Service Login Function
</h4>

<p>For this tutorial, I have created an API for us to use.  </p>
<p>The first thing we are going to do is create our login function</p>
<ol>
<li><p>Open the src\app\shared\services\auth.service.ts file</p>
<pre><code class="lang-bash"> auth.service.ts
</code></pre>
</li>
<li><p>Import the following so that we can make our HTTP calls and get a response back.  </p>
<pre><code class="lang-TypeScript"> import { Http, Response, RequestOptions } from &#39;@angular/http&#39;;
 import { Observable } from &#39;rxjs/Rx&#39;;
</code></pre>
</li>
</ol>
<ol>
<li><p>In order to use the HTTP module, we need to inject it into our constructor</p>
<pre><code class="lang-TypeScript"> constructor(private http: Http) {
 }
</code></pre>
</li>
</ol>
<ol>
<li><p>For the API that we are using (SailsJS based), it requires that we set the HTTP option to allow credentials so that the session cookie can be passed back and forth, else it will always think you haven&#39;t logged in.  </p>
<pre><code class="lang-TypeScript"> private options = new RequestOptions({ withCredentials: true });
</code></pre>
</li>
<li><p>Next we need to create our login function within the AuthService class that will call our API.  Place the login function after the constructor.</p>
 <div class="alert alert-warning" role="alert">For now we are hard coding the API url into the service.  In the &quot;Environment Configuration&quot; chapter we will change this to pull from a configuration file</div>

<pre><code class="lang-TypeScript"> login(email: string, password: string): Observable&lt;boolean&gt; {
     let loginInfo = { &quot;email&quot;: email, &quot;password&quot;: password };
     return this.http.put(&quot;https://dj-sails-todo.azurewebsites.net/user/login&quot;, loginInfo, this.options)
         .do((res: Response) =&gt; {
             if (res){
                 return Observable.of(true);
             }

             return Observable.of(false);
         })
         .catch(error =&gt; {
             console.log(&#39;login error&#39;, error);
             return Observable.of(false);
         });
 }
</code></pre>
<ul>
<li>This code setups the call to the login API and and returns back an Observable.  </li>
<li><p>Note that this code is not called until someone subscribes to the login function which we will be doing next.</p>
<div class="alert alert-danger" role="alert">The API is setup for username/password validation.  Make sure you do not use your real passwords as this is just a test API and not production secured.</div>

</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>


<h4 class="exercise-start">
    <b>Exercise</b>: Call AuthService from LoginComponent
</h4>

<p>Now that we have our AuthService completed, we need to call it from our LoginComponent.  If we get a user back we will redirect the user to the home page</p>
<ol>
<li><p>Open the src\login\login.component.ts file</p>
<pre><code class="lang-bash"> login.component.ts
</code></pre>
</li>
<li><p>Import the AuthService and Router so that we can make call our LoginService and redirect upon successful login.  </p>
<pre><code class="lang-TypeScript"> import { AuthService } from &#39;../shared/services/auth.service&#39;;
 import { Router } from &#39;@angular/router&#39;;
</code></pre>
</li>
<li><p>In order to use the AuthService and Router, we need to inject it into our constructor</p>
<pre><code class="lang-TypeScript">constructor(private authService: AuthService, private router: Router) { }
</code></pre>
</li>
<li><p>Next we need to update our login function to call the AuthService and redirect if it finds the user.</p>
<pre><code class="lang-TypeScript"> login(formValues) {
     this.authService.login(formValues.email, formValues.password)
         .subscribe(result =&gt; {
             if (!result) {
                 console.log(&#39;user not found&#39;);
             } else {
                 this.router.navigate([&#39;/&#39;]);
             }
     });
 }
</code></pre>
</li>
<li><p>Navigate to <a href="http://localhost:4200/login">http://localhost:4200/login</a> .</p>
<ul>
<li>If you enter an email of foo@foo.com with a password 123456 you should be redirected to the home page</li>
<li>If you enter a bogus email or password, you will see a &quot;user not found&quot; message in the browser developer tools console.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>:  Show Invalid Login Message
</h4>

<p>Up to this point, we have been using the console to output when the login failed but we can not expect the user to have the dev tools console open.  Instead we need to show to the user when there is an error.</p>
<ol>
<li><p>Open the login.component.ts file</p>
<pre><code class="lang-bash"> login.component.ts
</code></pre>
</li>
<li><p>Create a new variable inside of the LoginComponent class called invalidLogin, is of type boolean and the default value is false.</p>
<pre><code class="lang-TypeScript"> invalidLogin: boolean = false;
</code></pre>
</li>
<li><p>Now in the login method replace the console.log line and set the invalidLogin variable to true.  Make sure in the else statement that you set the invalidLogin to false.</p>
<pre><code class="lang-TypeScript"> this.invalidLogin = true;
</code></pre>
<ul>
<li>We have to use this. to access the variable due to scoping.  </li>
</ul>
</li>
</ol>
<p>Now we are ready to implement the UI to show the error message.  </p>
<ol>
<li><p>Open the login.component.html file</p>
<pre><code class="lang-bash"> login.component.html
</code></pre>
</li>
<li><p>We want to put our message after the cancel button but inside the <code>&lt;/form&gt;</code> tag</p>
</li>
<li><p>Add the following alert message</p>
<pre><code class="lang-html"> &lt;div *ngIf=&quot;invalidLogin&quot; class=&quot;alert alert-danger&quot;&gt;
     Invalid Login
 &lt;/div&gt;
</code></pre>
<div class="exercise-end"></div>

</li>
</ol>
<h3 id="required-validation">Required Validation</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Required Validation
</h4>

<p>A standard requirement for html forms is to have client side validation.  In this section we are going to implement the required field validation for both email and password.  </p>
<p>Adding required validation is as easy as adding a required attribute to the input field</p>
<ol>
<li><p>Open the login.component.html</p>
<pre><code class="lang-bash"> login.component.html
</code></pre>
</li>
<li><p>On the email and password fields add the <code>required</code> attribute</p>
<pre><code class="lang-html"> required
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Display Validation Errors
</h4>

<p>Next we want to display a message to the user when they have invalid entries in the form fields.</p>
<ol>
<li><p>In order to refer to the email field by name when checking errors, we need to add the <code>#email=&quot;ngModel&quot;</code> attribute to the email input field to tell Angular to create a variable for the control and make the value the ngModel value for the email field.  </p>
<pre><code class="lang-html"> #email=&quot;ngModel&quot;
</code></pre>
</li>
<li><p>For the email field, inside of the form-group div tag and after the input field add the following code.  This code will show when the required errors triggers.  To trigger the error message, click on the email field and then click on the password field.</p>
<pre><code class="lang-TypeScript"> &lt;div *ngIf=&quot;email.errors &amp;&amp; (email.dirty || email.touched)&quot; class=&quot;alert alert-danger&quot;&gt;
     &lt;div [hidden]=&quot;!email.errors.required&quot;&gt;
     Email is required
     &lt;/div&gt;
 &lt;/div&gt;
</code></pre>
</li>
<li><p>Just like the email field, we need to add the <code>#password=&quot;ngModel&quot;</code> attribute to the input control to name the field</p>
<pre><code class="lang-html"> #password=&quot;ngModel&quot;
</code></pre>
</li>
<li><p>For the password field, inside of the form-group div tag and after the input field add the following code.  This code will show when the required errors triggers.  To trigger the error message, click on the password field and then click on the email field.</p>
<pre><code class="lang-TypeScript"> &lt;div *ngIf=&quot;password.errors &amp;&amp; (password.dirty || password.touched)&quot; class=&quot;alert alert-danger&quot;&gt;
     &lt;div [hidden]=&quot;!password.errors.required&quot;&gt;
     Password is required
     &lt;/div&gt;
 &lt;/div&gt;
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="email-validation">Email  Validation</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Email Validation
</h4>

<p>With the Angular 4 release, they added an email validator.  To add the validator to our email field, we just need to add an <code>email</code> attribute like we did for the <code>required</code> attribute.</p>
<pre><code class="lang-html">email
</code></pre>
<p>Next we need to add a message like we did for the required validator for when the email validation triggers on an invalid email.  Add the following code below the required message but within the <code>&lt;div&gt;</code> that checks if there are errors.</p>
<pre><code class="lang-html">&lt;div [hidden]=&quot;email.errors.required || !email.errors.email&quot;&gt;
    Must be an email address
&lt;/div&gt;
</code></pre>
<p>Now we are ready to test the email validation.  </p>
<ul>
<li><p>The validation will trigger if you input text into the email field that is not a valid email address.</p>
<p>  <img src="images/login-email-validation.png" alt="email validation"></p>
</li>
</ul>
<div class="exercise-end"></div>

<h3 id="disable-login-button">Disable Login Button</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Disable Login Button Until Valid
</h4>

<p>The last thing we want to do is to disable the login button until the form is valid.</p>
<ol>
<li><p>Find the submit button and add the disabled attribute that makes sure that the loginForm is valid before enabling the button</p>
<pre><code class="lang-html"> [disabled]=&quot;loginForm.invalid&quot;
</code></pre>
</li>
<li><p>Now when either field is invalid the login button will be disabled and a lighter share of blue</p>
<p> <img src="images/login-submit-disabled.png" alt="required validation"></p>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="create-create-account-component">Create Create Account Component</h3>
<p>Up to this point, we have only been able to login to an existing account.  Now we are going to create the signup page.  </p>
<p>Creating the signup component is just like the rest of the component that we have created.  We will have an html, scss, spec, and ts file.  We will have a form that calls to a function in the component that calls to a service to process the data.</p>
<div class="alert alert-danger" role="alert">Since the signup component creation is exactly like the login component we are just going a quick here is the code walk through</div>

<h4 class="exercise-start">
    <b>Exercise</b>: AuthService Signup Function 
</h4>

<p>We are first going to create the signup function in the AuthService.</p>
<ol>
<li><p>Open the src\app\shared\services\auth.service.ts</p>
<pre><code class="lang-bash"> auth.service.ts
</code></pre>
</li>
<li><p>Add the following method to allow an account to be created</p>
<pre><code class="lang-TypeScript">signup(email: string, password: string): Observable&lt;boolean&gt; {
 let loginInfo = { &quot;email&quot;: email, &quot;password&quot;: password };
 return this.http.post(&quot;https://dj-sails-todo.azurewebsites.net/user/&quot;, loginInfo, this.options)
   .do((res: Response) =&gt; {
     if (res) {
       return Observable.of(true);
     }

     return Observable.of(false);
   })
   .catch(error =&gt; {
     console.log(&#39;signup error&#39;, error);
     return Observable.of(false);
   });
}
</code></pre>
<div class="alert alert-danger" role="alert">REMINDER: Since we have to pass the password to the API in order to create the account and we are communicating over a non-secure channel, make sure you do not use your real passwords.</div>

</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Create Signup Component
</h4>

<ol>
<li><p>Open terminal and run the ng generate to create the signup component</p>
<pre><code class="lang-TypeScript">ng generate component signup
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add Signup Route
</h4>

<ol>
<li><p>Open the src\app\app-routing.module.ts file</p>
<pre><code class="lang-bash">app-routing.module.ts
</code></pre>
</li>
<li><p>Import the signup component</p>
<pre><code class="lang-TypeScript"> import { SignupComponent } from &#39;./signup/signup.component&#39;;
</code></pre>
</li>
<li><p>Add a new route to get to the signup page</p>
<pre><code class="lang-TypeScript">{ path: &#39;signup&#39;, component: SignupComponent},
</code></pre>
</li>
<li><p>You routes should look like</p>
<pre><code class="lang-TypeScript"> const routes: Routes = [
     {
         path: &#39;&#39;,
         children: [],
     },
     { path: &#39;login&#39;, children: [], component: LoginComponent },
     { path: &#39;signup&#39;, component: SignupComponent},
 ];
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Create Signup UI
</h4>

<ol>
<li><p>Open the src\app\signup\signup.component.html file</p>
<pre><code class="lang-bash">signup.component.html
</code></pre>
</li>
<li><p>Replace the contents with the following UI and template based form to allow a user to create an account</p>
<pre><code class="lang-html"> &lt;h1&gt;Sign Up&lt;/h1&gt;
 &lt;hr&gt;
 &lt;div&gt;
 &lt;form #signupForm=&quot;ngForm&quot; (ngSubmit)=&quot;signup(signupForm.value)&quot; autocomplete=&quot;off&quot; novalidate&gt;
     &lt;div class=&quot;form-group&quot;&gt;
     &lt;label for=&quot;userName&quot;&gt;Email:&lt;/label&gt;
     &lt;input #email=&quot;ngModel&quot; (ngModel)=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; required email id=&quot;email&quot; type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Email...&quot; /&gt;
     &lt;div *ngIf=&quot;email.errors &amp;&amp; (email.dirty || email.touched)&quot; class=&quot;alert alert-danger&quot;&gt;
         &lt;div [hidden]=&quot;!email.errors.required&quot;&gt;
             Email is required
         &lt;/div&gt;
         &lt;div [hidden]=&quot;email.errors.required || !email.errors.email&quot;&gt;
             Must be an email address
         &lt;/div&gt;
     &lt;/div&gt;
     &lt;/div&gt;
     &lt;div class=&quot;form-group&quot;&gt;
     &lt;label for=&quot;password&quot;&gt;Password:&lt;/label&gt;
     &lt;input #password=&quot;ngModel&quot; (ngModel)=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; required minlength=&quot;6&quot; id=&quot;password&quot; type=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password...&quot; /&gt;
     &lt;div *ngIf=&quot;password.errors &amp;&amp; (password.dirty || password.touched)&quot; class=&quot;alert alert-danger&quot;&gt;
         &lt;div [hidden]=&quot;!password.errors.required&quot;&gt;
             Password is required
         &lt;/div&gt;
         &lt;div [hidden]=&quot;!password.errors.minlength&quot;&gt;
             Password must be at least 6 characters long.
         &lt;/div&gt;
     &lt;/div&gt;
     &lt;/div&gt;

     &lt;span&gt;
         &lt;button type=&quot;submit&quot; [disabled]=&quot;signupForm.invalid&quot; class=&quot;btn btn-primary&quot;&gt;Sign Up&lt;/button&gt;
     &lt;/span&gt;
     &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Cancel&lt;/button&gt;
     &lt;span&gt;&lt;a routerLink=&quot;/login&quot;&gt;login to existing account&lt;/a&gt;&lt;/span&gt;

 &lt;/form&gt;
 &lt;br /&gt;
 &lt;div *ngIf=&quot;loginInvalid&quot; class=&quot;alert alert-danger&quot;&gt;Invalid Login Info&lt;/div&gt;
 &lt;/div&gt;
</code></pre>
</li>
<li><p>Open the src\app\signup\signup.component.ts file</p>
<pre><code class="lang-bash">signup.component.ts
</code></pre>
</li>
<li><p>Replace the contents of the file with the following</p>
<pre><code class="lang-TypeScript"> import { Component, OnInit } from &#39;@angular/core&#39;;
 import { AuthService } from &#39;../shared/services/auth.service&#39;;
 import { Router } from &#39;@angular/router&#39;;

 @Component({
     selector: &#39;app-signup&#39;,
     templateUrl: &#39;./signup.component.html&#39;,
     styleUrls: [&#39;./signup.component.scss&#39;]
 })
 export class SignupComponent implements OnInit {
     loginInvalid: boolean = false;
     constructor(private authService: AuthService, private router: Router) { }

     ngOnInit() {
     }

     signup(formValues) {
         this.authService.signup(formValues.email, formValues.password)
         .subscribe(result =&gt; {
             if (!result) {
                 this.loginInvalid = true;
             } else {
                 this.router.navigate([&#39;/&#39;]);
             }
         });
     }
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add Link Between Login and Signup
</h4>

<ol>
<li><p>Open the login.component.html file</p>
<pre><code class="lang-bash"> login.component.html
</code></pre>
</li>
<li><p>Next to the cancel button add the following HTML to give a link to the create page</p>
<pre><code class="lang-html">&lt;span&gt;&lt;a routerLink=&quot;/signup&quot;&gt;create account&lt;/a&gt;&lt;/span&gt;
</code></pre>
</li>
<li><p>If you go to <a href="http://localhost:4200/signup">http://localhost:4200/signup</a> you should now to be able to signup and navigate between the signup and login pages.  Once signed up,  you will be redirected to the home page and shown the todo items.</p>
</li>
</ol>
<div class="exercise-end"></div>


				</div>
				<hr>

				<div class="chapter">
					<h2 id="reactive-forms">Reactive Forms</h2>
<h3 id="overview">Overview</h3>
<p>In the previous chapter, we took a look at template based forms.  Templates are great for very simple forms that you do not want to unit test at all.  However, if you want to unit test your forms you will need to reuse reactive based forms. </p>
<p>Reactive forms allow you to define the form fields and validation in the component instead of the template.  You can easily test the form fields and validation logic.  You can also dynamically build the form and validation in the component.</p>
<p>We are going to build the form to enter our Todo items using Reactive forms.</p>
<h3 id="goals">Goals</h3>
<ul>
<li>Understand reactive forms</li>
<li>Create a reactive form </li>
<li>Implement input validation</li>
<li>Submit form values to a service</li>
</ul>
<h3 id="code-from-previous-chapter">Code from Previous Chapter</h3>
<div class="alert alert-danger" role="alert">Skip this section if you completed the previous chapter</div>

<p>If you have not completed the previous chapter you can get the completed code by downloading the code from Github.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Downloading Code 
</h4>

<ol>
<li>Downloading and extracting the zip file into your projects folder (c:\projects or ~/projects) at <a href="https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-template-forms.zip">https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-template-forms.zip</a> </li>
<li><p>After you get the code, run npm install to get all of the NPM dependencies.</p>
<pre><code class="lang-bash"> npm install
</code></pre>
</li>
<li><p>Open Visual Studio Code</p>
</li>
<li>In Visual Studio Code, go under the File menu, select Open folder and navigate to the folder that you unzipped the files into</li>
<li>If you have ng serve running in a different editor, make sure to stop it from running.</li>
<li><p>Open the Integrated Terminal in Visual Studio Code (ctrl + `)  and run ng serve</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="create-todo-component">Create Todo Component</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Create Todo Component 
</h4>

<ol>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li><p>Run the ng generate command below to create the todo component</p>
<pre><code class="lang-bash"> ng generate component todo
</code></pre>
</li>
<li><p>The generate command will create 4 files: </p>
<p> <img src="images/todo-generate.png" alt="output of generate"></p>
<ul>
<li>scss (styles)</li>
<li>html (view)</li>
<li>spec file (test)</li>
<li>component (controller)</li>
<li>add reference to the component in the app.module.ts file.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-route">Add Route</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Todo Routing 
</h4>

<p>Before we can view our todo component, we need to tell Angular how to route to the page</p>
<ol>
<li><p>Open the src\app\app-routing.module.ts file</p>
<pre><code class="lang-bash"> app-routing.module.ts
</code></pre>
</li>
<li><p>Add the Import statement for the todo component on line 3</p>
<pre><code class="lang-TypeScript"> import { TodoComponent } from &#39;./todo/todo.component&#39;;
</code></pre>
</li>
<li><p>We want to make the Todo component the home page.  We can do this by adding a component field to the <code>path: &#39;&#39;</code> route </p>
<pre><code class="lang-TypeScript"> {
     path: &#39;&#39;,
     children: [],
     component: TodoComponent
 }
</code></pre>
</li>
<li><p>You routes should look like</p>
<pre><code class="lang-TypeScript"> const routes: Routes = [
     {
         path: &#39;&#39;,
         children: [],
         component: TodoComponent
     },
     { path: &#39;login&#39;, children: [], component: LoginComponent },
     { path: &#39;signup&#39;, component: SignupComponent},
 ];
</code></pre>
</li>
<li><p>The todo page should display when you to the home, <a href="http://http://localhost:4200/">http://http://localhost:4200/</a></p>
<p> <img src="images/todo-initial-view.png" alt="todo initial view"></p>
 <div class="alert alert-info" role="alert"><strong>Note:</strong> When you navigate to the home page, the TodoComponent is loaded into the <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> in the html in  src\app\app.component.html.  The router-outlet tag is how Angular knows where to put the rendered content for the route.</div>

</li>
</ol>
<div class="exercise-end"></div>


<h3 id="create-form">Create Form</h3>
<p>Next we are going to create the form without any validation logic at all.  Our form will have 1 input field for the todo item and an add button.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Import ReactiveFormsModule
</h4>

<p>With reactive forms, we are going to setup the form in your components TypeScript file.  </p>
<p>We need to import the ReactiveFormsModule into our AppModule before we can use it.</p>
<ol>
<li><p>Open the src\app\app.module.ts </p>
<pre><code class="lang-bash"> app.module.ts
</code></pre>
</li>
<li><p>Add the ReactiveFormsModule to the existing  @angular/forms import so that it looks like </p>
<pre><code class="lang-TypeScript"> import { FormsModule, ReactiveFormsModule } from &#39;@angular/forms&#39;;
</code></pre>
</li>
<li><p>In the @NgModule imports you need to add ReactiveFormsModule to the list</p>
<pre><code class="lang-TypeScript"> imports: [
     BrowserModule,
     FormsModule,
     ReactiveFormsModule,
     HttpModule,
     AppRoutingModule
 ],
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Form setup
</h4>

<p>Now we are ready to add all of the functionality to the component for the UI to interface with. For the todo component it is the src\app\todo\todo.component.ts file.  We need to add the Form.</p>
<ol>
<li><p>Open the todo\todo.component.ts file</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>When creating Reactive Forms, you will need to import the FormGroup and FormBuilder modules from @angular/forms</p>
<pre><code class="lang-TypeScript"> import { FormGroup, FormBuilder } from &#39;@angular/forms&#39;;
</code></pre>
</li>
<li><p>In order to use the FormBuilder we need to inject it into the TodoComponent&#39;s constructor</p>
<pre><code class="lang-TypeScript"> constructor(private formBuilder: FormBuilder) {}
</code></pre>
</li>
<li><p>Before creating our form, we need to define the addForm variable to hold the configuration.  Inside of the TodoComponent class above the constructor, add the following variable</p>
<pre><code class="lang-TypeScript"> addForm: FormGroup;
</code></pre>
</li>
<li><p>To configure the form we will use the ngOnInit lifecycle event.  The ngOnInit lifecycle event will run before the component has rendered.  Inside the ngOnit function we need to tell Angular that the addForm is a formBuilder group with 1 field called item with an empty default value.</p>
<pre><code class="lang-TypeScript"> this.addForm = this.formBuilder.group({
     &#39;item&#39;: &#39;&#39;
 });
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>:  Creating the Todo UI 
</h4>

<p>We are now ready to create our UI. </p>
<ol>
<li><p>Open src\app\todo\todo.component.html </p>
<pre><code class="lang-bash"> todo.component.html
</code></pre>
</li>
<li><p>Replace the existing html with:</p>
<pre><code class="lang-html"> &lt;div class=&quot;container&quot;&gt;
     &lt;div class=&quot;page-header&quot;&gt;
         &lt;h1 align=&quot;center&quot;&gt;Todo List&lt;/h1&gt;
     &lt;/div&gt;
     &lt;form role=&quot;form&quot; [formGroup]=&quot;addForm&quot; class=&quot;text-center&quot;&gt;
         &lt;div class=&quot;form-group row&quot;&gt;
             &lt;div class=&quot;col-sm-10&quot;&gt;
                 &lt;input type=&quot;text&quot; class=&quot;form-control form-control-lg&quot; formControlName=&quot;item&quot; placeholder=&quot;Todo!&quot;&gt;
             &lt;/div&gt;
             &lt;div class=&quot;col-sm-2&quot;&gt;
                 &lt;button type=&quot;submit&quot; [disabled]=&quot;addForm.invalid&quot; class=&quot;btn btn-primary btn-lg btn-block&quot;&gt;Add&lt;/button&gt;
             &lt;/div&gt;
         &lt;/div&gt;
     &lt;/form&gt;
     &lt;div class=&quot;container&quot;&gt;
         &lt;h3&gt;Form Status Info&lt;/h3&gt;
         &lt;table class=&quot;table table-striped table-bordered&quot;&gt;
         &lt;thead&gt;
             &lt;tr&gt;
                 &lt;th&gt;Status&lt;/th&gt;
                 &lt;th&gt;Form&lt;/th&gt;
                 &lt;th&gt;Item Field&lt;/th&gt;
             &lt;/tr&gt;
         &lt;/thead&gt;
         &lt;tbody&gt;
             &lt;tr&gt;
                 &lt;td&gt;Dirty&lt;/td&gt;
                 &lt;td&gt;{{ addForm.dirty }}&lt;/td&gt;
                 &lt;td&gt;{{ addForm.get(&#39;item&#39;).dirty }}&lt;/td&gt;
             &lt;/tr&gt;
             &lt;tr&gt;
                 &lt;td&gt;Touched&lt;/td&gt;
                 &lt;td&gt;{{ addForm.touched }}&lt;/td&gt;
                 &lt;td&gt;{{ addForm.get(&#39;item&#39;).touched }}&lt;/td&gt;
             &lt;/tr&gt;
             &lt;tr&gt;
                 &lt;td&gt;Valid&lt;/td&gt;
                 &lt;td&gt;{{ addForm.valid }}&lt;/td&gt;
                 &lt;td&gt;{{ addForm.get(&#39;item&#39;).valid }}&lt;/td&gt;
             &lt;/tr&gt;
             &lt;tr&gt;
                 &lt;td&gt;Errors&lt;/td&gt;
                 &lt;td&gt;N/A&lt;/td&gt;
                  &lt;td&gt;&lt;pre&gt;{{ addForm.get(&#39;item&#39;).errors | json }}&lt;/pre&gt;&lt;/td&gt;
             &lt;/tr&gt;
             &lt;tr&gt;
                 &lt;td&gt;Form Field Values&lt;/td&gt;
                 &lt;td colspan=&quot;2&quot;&gt;&lt;pre&gt;{{ addForm.value | json }}&lt;/pre&gt;&lt;/td&gt;
             &lt;/tr&gt;
         &lt;/tbody&gt;
         &lt;/table&gt;
     &lt;/div&gt;
 &lt;/div&gt;
</code></pre>
<ul>
<li>The [formGroup] binds the addForm in the todo.component.ts to the form.</li>
<li>On the input field, the formControlName corresponds to the <code>item</code> field in the <code>addForm</code> FormGroup</li>
<li>The form is using Bootstrap for the styling with the form-group, form-control, btn, and btn* css classes.</li>
<li>The form status info section, is debugging information for the form and the item field for us so that we can see the current state, validation errors, and the form field values.<ul>
<li>As you type into the item field, the form status info value section will update</li>
</ul>
</li>
<li><p>The add button is set as disabled until validation passes. </p>
<div class="alert alert-info" role="alert">If you completed the previous chapter on Template Forms, you will notice that we did not setup any ngModel tags or pass in the form to the save method.  With Reactive Forms, the formGroup provides the data binding for us.</div>

</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-submit-method">Add Submit Method</h3>
<p>In order to submit the form we need to add an <code>(ngSubmit)=&quot;&quot;</code></p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Add ngSubmit
</h4>

<ol>
<li><p>Open src\app\todo\todo.component.html file</p>
<pre><code> ```bash
 todo.component.html
     ```
</code></pre></li>
<li><p>On the <code>&lt;form&gt;</code> tag add the <code>(ngSubmit)=&quot;&quot;</code> attribute and have it call the save function </p>
<pre><code class="lang-html"> (ngSubmit)=&quot;save()&quot;
</code></pre>
</li>
<li><p>Open the src\app\todo\todo.component.ts file </p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Add a function called save that returns a void.  Inside of the save function  add a console log that outputs the addForm field value property.</p>
<pre><code class="lang-TypeScript"> save() : void {
     console.log(&#39;form values: &#39;, this.addForm.value);
 }
</code></pre>
</li>
<li><p>If you do not already have the Chrome Developer Tools open, open them up and click on the console tab</p>
</li>
<li>Enter text into the input box on the home page <a href="http://localhost:4200">http://localhost:4200</a> and click submit.</li>
<li>You should see the form value output to the Chrome Developer Tools console</li>
</ol>
<div class="exercise-end"></div>


<h3 id="validators">Validators</h3>
<p>Right now we do not have any validation being done on the form.  To setup validation, we need to modify our formBuilder item field setup.</p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Add Validators for required and min length
</h4>

<ol>
<li><p>Open the src\app\todo\todo.component.ts file</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>To use the Angular form validators, we need to add the Validators module to the @angular/forms import statement like so</p>
<pre><code class="lang-TypeScript"> import { FormGroup, FormBuilder, Validators } from &#39;@angular/forms&#39;;
</code></pre>
<ul>
<li>note that order of the modules in not important</li>
</ul>
</li>
<li><p>In the ngOnInit function we need add the Validators required and minLength to the item field that we defined earlier.  In order to add the validators, we need to turn the item field value into an array with the 1st position being the default value and the 2nd position as an array of validators.  For the minLength, we are going to require at least 3 characters.</p>
<pre><code class="lang-TypeScript"> &#39;item&#39;: [&#39;&#39;, [Validators.required, Validators.minLength(3)]]
</code></pre>
</li>
</ol>
<p>Now that we have validators setup, we need to output an error message to user when the validation fails.  For now, we are going to do it in the html but later we will make it more generic and add it to the component file instead.  </p>
<ol>
<li><p>Open the todo.component.html file</p>
<pre><code class="lang-bash"> todo.component.html
</code></pre>
</li>
<li><p>After the closing form tag in the todo.component.html file add the following </p>
<pre><code class="lang-html"> &lt;div class=&quot;alert alert-danger&quot; *ngIf=&quot;addForm.get(&#39;item&#39;).errors &amp;&amp; (addForm.get(&#39;item&#39;).dirty || addForm.get(&#39;item&#39;).touched)&quot;&gt;
     &lt;span *ngIf=&quot;addForm.get(&#39;item&#39;).errors.required&quot;&gt;
         Item is required
     &lt;/span&gt;
     &lt;span *ngIf=&quot;addForm.get(&#39;item&#39;).errors.minlength&quot;&gt;
         Item must be at least 3 characters
     &lt;/span&gt;
 &lt;/div&gt;
</code></pre>
<ul>
<li>By looking at the dirty and touched status, we can ensure that we don&#39;t display the error message before the user has had a chance to click on the input field.</li>
<li>By looking at the errors status, we can ensure we only show the messages when there are errors</li>
<li>For each of the messages, we can look at the individual validators to see which one failed and only display that message.</li>
</ul>
</li>
<li><p>If you go to <a href="http://localhost:4200/">http://localhost:4200/</a> click on the field and then click off it the required validator will fire.  If you enter less than 3 characters the minLength validator will fire.  </p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="easier-validation-messages">Easier Validation Messages</h3>
<p>Having the validation messages in the html template gets old really fast.  It is a lot of code to maintain.  With the Reactive Forms, we can create a generic error checker for the whole form and set a value for each of the form fields.</p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Watching for Changes
</h4>

<p>We are going to create a function that will be called each time the form values change.  Within the function we will loop through all of the fields and check if they are dirty and not valid.  Then we will look up the validation message to use for the form field and validator that failed.</p>
<ol>
<li><p>Open the src\app\todo\todo.component.ts file</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>We need to create a variable to hold the error message for each of the form fields. In this case we only have 1 form field called item.  We are going to call the variable formErrors.  The default value for the error message is a blank string.  This list will also be used to determine which form fields to inspect for validation errors.</p>
<pre><code class="lang-TypeScript"> formErrors = {
     &#39;item&#39;: &#39;&#39;
 };
</code></pre>
</li>
<li><p>Next we need to create a variable to hold the validation messages for each of the form fields.  The name of the validation message must match the name of the validation.</p>
<pre><code class="lang-TypeScript"> validationMessages = {
     &#39;item&#39;: {
     &#39;required&#39;: &#39;Item is required.&#39;,
     &#39;minlength&#39;: &#39;Item must be at least 3 characters&#39;
     }
 };
</code></pre>
</li>
<li><p>Now that we the look up for the validation error messages and a place to store the form field error we are ready to create our generic function to determine the actual error message.</p>
<pre><code class="lang-TypeScript"> onValueChanged(data?: any) {
     if (!this.addForm) { return }
     const form = this.addForm;

     for (const field in this.formErrors) {
         // clear previous error message (if any)
         this.formErrors[field] = &#39;&#39;;
         const control = form.get(field);

         if (control &amp;&amp; control.dirty &amp;&amp; !control.valid) {
             const messages = this.validationMessages[field];
             for (const key in control.errors) {
                 this.formErrors[field] += messages[key] + &#39; &#39;;
             }
         }
     }
 }
</code></pre>
<ul>
<li>The 1st thing the method does is make sure that our addForm actually has a value.</li>
<li>Then we loop through the formError variable, get the field and check if the form field is invalid</li>
<li>If the form field is invalid, then we look up the validation message for the form field and validator that failed and set the formError for that field.</li>
</ul>
</li>
<li><p>Next we need to subscribe to the addForm valueChanges event and call the onValueChanged function we just created.  We are going to setup the subscribe in the ngOnInit function</p>
<pre><code class="lang-TypeScript"> this.addForm.valueChanges.subscribe(data =&gt; this.onValueChanged(data));
</code></pre>
</li>
<li><p>The last thing we are going to is call the onValueChanged function in the ngOnInit function to reset any formErrors back to blank</p>
<pre><code class="lang-TypeScript"> this.onValueChanged();
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Show Error Message in UI
</h4>

<p>The last thing we need to do is up the UI to display the form error messages.    </p>
<ol>
<li>Open the todo.component.html file</li>
<li><p>Replace the validation messages that you added in the previous section with the one below.</p>
<pre><code class="lang-html"> &lt;div *ngIf=&quot;formErrors.item&quot; class=&quot;alert alert-danger&quot;&gt;
     {{ formErrors.item }}
 &lt;/div&gt;
</code></pre>
</li>
<li><p>If you navigate to <a href="http://localhost:4200">http://localhost:4200</a>, click on the item form field and enter 1 character it will trigger the minLength validator and will show the minLength validation message.  If you then blank out the field you will see the required message.</p>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add Border On Invalid
</h4>

<p>You can also add a border around the Bootstrap form-group for the item form field by adding the has-danger css class when the formErrors.item has a value.</p>
<ol>
<li><p>Open the todo.component.html file</p>
<pre><code class="lang-html"> todo.component.html
</code></pre>
</li>
<li><p>To the form-group div tag, add an <code>[ngClass]</code> attribute that checks that formErrors.item has a value and if so then adds the has-danger css to the div tag</p>
<pre><code class="lang-html"> [ngClass]=&quot;{&#39;has-danger&#39;: formErrors.item}&quot;
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="wait-before-validation-messages">Wait Before Validation Messages</h3>
<p>You might have notice after implementing the previous logic to check the field values in the TypeScript file, that the validation errors are immediately shown which can be annoying to users while they type.  Instead it would be better to wait for a given amount of time after the last keystroke before checking.  This is called debounce.  </p>
<p>Angular makes it very easy to implement what they call debounce to wait for the user to stop typing before running validation on our item input field.</p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Implement Debounce
</h4>

<ol>
<li><p>Open todo.component.ts file</p>
<pre><code class="lang-TypeScript"> todo.component.ts
</code></pre>
</li>
<li><p>Import the rxjs debounceTime</p>
<pre><code class="lang-TypeScript"> import &#39;rxjs/add/operator/debounceTime&#39;;
</code></pre>
</li>
<li><p>On the line that you added the <code>itemControl.valueChanges.subscribe</code> add the <code>debounceTime</code> statement between valueChanges and subscribe like so</p>
<pre><code class="lang-TypeScript"> this.addForm.valueChanges.debounceTime(1000).subscribe(data =&gt; this.onValueChanged(data));
</code></pre>
</li>
<li><p>Now if you test the UI at <a href="http://localhost:4200">http://localhost:4200</a>, it will wait 1 second after the last keystroke before checking the input field validation.  You can change the time it waits by increasing or decreasing the value that is passed into the debounceTime function.</p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="saving-todo-items">Saving Todo Items</h3>
<p>We are at the point, where we are ready to create a service to save the todo item.  Right now, we are just output the add form values to the console.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Class to Hold Todo item
</h4>

<p>Since TypeScript is a strongly typed language it is best practice to create a class to hold our Todo items.  This way we can get the type support for the different fields.</p>
<ol>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li><p>Run the ng generate command below to create the todo component</p>
<pre><code class="lang-bash"> ng generate class shared/classes/Todo
</code></pre>
</li>
<li><p>This will create 1 files: </p>
<p> <img src="images/todo-generate-class.png" alt="generate output"></p>
</li>
</ol>
<ol>
<li><p>Open src/app/shared/classes/todo.ts</p>
<pre><code class="lang-TypeScript"> todo.ts
</code></pre>
</li>
<li><p>Add the following 4 fields to the Todo class to hold the information about our todo item</p>
 <table class="table table-striped table-bordered">
 <thead>
     <tr>
         <th>Field</th>
         <th>Data Type</th>
         <th>Purpose</th>
     </tr>
 </thead>
 <tbody>
     <tr>
         <td>id</td>
         <td>string</td>
         <td>unique identifier to the item</td>
     </tr>
     <tr>
         <td>item</td>
         <td>string</td>
         <td>todo item text<td>
     </tr>
     <tr>
         <td>createdAt</td>
         <td>Date</td>
         <td>date added</td>
     </tr>
     <tr>
         <td>updatedAt</td>
         <td>Date</td>
         <td>date last updated</td>
     </tr>
     <tr>
         <td>completed</td>
         <td>boolean</td>
         <td>completion state</td>
     </tr>
     <tr>
         <td>user</td>
         <td>string</td>
         <td>id of the user that created the todo item</td>
     </tr>
 </tbody>
 </table>

<pre><code class="lang-TypeScript"> id: string;
 item: string;
 completed: boolean;
 createdAt: Date;
 updatedAt: Date;
 user: string;
</code></pre>
</li>
<li><p>To make it easier to create new todo Items and implement unit testing, we are going to add a constructor to initialize the fields.  Item will required while id, completed and createdAt will be optional. The optional fields must be after all of the required fields.</p>
<pre><code class="lang-TypeScript"> constructor(
     item: string, 
     id?: string,
     completed?: boolean,
     createdAt?: Date,
     updatedAt?: Date) {
     this.id = id;
     this.item = item;
     this.completed = completed ? completed: false;
     this.createdAt = createdAt ? createdAt: new Date();
     this.updatedAt = updatedAt ? updatedAt: new Date();
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>:  Create Todo Service
</h4>

<ol>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li><p>Run the ng generate command below to create the todo component</p>
<pre><code class="lang-bash"> ng generate service shared/services/Todo --module App
</code></pre>
</li>
<li><p>This will create 2 files and update the app.module to add the TodoService into the providers list</p>
<p> <img src="images/todo-service-generate.png" alt="generate output"></p>
<ul>
<li>todo.service.ts</li>
<li>todo.service.spec.ts</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Save Todo Item
</h4>

<p>Now that we have the Todo service file created, we need to add our save method that calls our json-server api server and then update the Todo component to call the service.</p>
<ol>
<li><p>Open src\app\shared\services\todo.service.ts </p>
<pre><code class="lang-bash"> todo.service.ts
</code></pre>
</li>
<li><p>Import the following so that we can make our HTTP calls and get a response back.  </p>
<pre><code class="lang-TypeScript"> import { Http, Response, RequestOptions } from &#39;@angular/http&#39;;
 import { Observable } from &#39;rxjs/Rx&#39;;
</code></pre>
</li>
<li><p>In order to use the HTTP module, we need to inject it into our constructor</p>
<pre><code class="lang-TypeScript"> constructor(private http: Http) { }
</code></pre>
</li>
<li><p>For the API that we are using (SailsJS based), it requires that we set the HTTP option to allow credentials so that the session cookie can be passed back and forth, else it will always think you haven&#39;t logged in.  Add this varaible to the TodoService class.</p>
<pre><code class="lang-TypeScript"> private options = new RequestOptions({ withCredentials: true });
</code></pre>
 <div class="alert alert-info" role="alert">You will need to pass in this.options as the last parameter for all of our http calls.</div>
</li>
<li><p>Before we create our save method we need to import the Todo class so that our data is typed when we pass it from the service the component. </p>
<pre><code class="lang-TypeScript"> import { Todo } from &#39;../classes/todo&#39;;
</code></pre>
</li>
<li><p>Next we need to create our save function that will call our API, pass in our TodoItem, and return back the results to the component.  </p>
<pre><code class="lang-TypeScript"> save(item: string): Observable&lt;Todo&gt; {
     return this.http.post(&#39;https://dj-sails-todo.azurewebsites.net/todo&#39;, new Todo(item), this.options)
     .map((res: Response) =&gt; {
         return &lt;Todo&gt;res.json();
     })
     .catch(error =&gt; {
         console.log(&#39;save error&#39;, error)
         return error;
     });
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Display Todo Item
</h4>

<p>Now that we have our Todo service save function created, we need to call it from our Todo component so that we can save our data.</p>
<ol>
<li><p>Open the src\app\todo\todo.component.ts file</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Before we can call the <code>TodoService.save</code> function we have to import the TodoService</p>
<pre><code class="lang-TypeScript"> import { TodoService } from &#39;../shared/services/todo.service&#39;;
</code></pre>
</li>
<li><p>Now that we have the TodoService import we need to inject it into the constructor to make it avaiable to the component.  </p>
<pre><code class="lang-TypeScript"> constructor(private formBuilder: FormBuilder, private todoService: TodoService) { }
</code></pre>
</li>
<li><p>Update the save method with the following code to call the <code>TodoService.save</code> function and output the result to the console</p>
<pre><code class="lang-TypeScript"> this.todoService.save(this.addForm.value.item)
 .subscribe(result =&gt; {
     console.log(&#39;save result&#39;, result);
 },
 error =&gt; {
     this.errorMessage = &lt;any&gt;error;
 });
</code></pre>
</li>
<li><p>We now need to create the errorMessage variable that is of type string in the Todocomponent class</p>
<pre><code class="lang-TypeScript"> errorMessage: string;
</code></pre>
</li>
<li><p>Open the todo.component.html file so that we can add the display of the save error message.</p>
<pre><code class="lang-bash"> todo.component.html
</code></pre>
</li>
<li><p>Now we need to add an alert section to our todo.component.html to display the error message.  After the <code>&lt;/form&gt;</code> tag, add the following code</p>
<pre><code class="lang-TypeScript"> &lt;div *ngIf=&quot;errorMessage&quot; class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;
     &lt;h3&gt;Error Saving&lt;/h3&gt;
     {{ errorMessage }}
 &lt;/div&gt;
</code></pre>
</li>
<li><p>Testing the error message display requires that we temporary set a value for the errorMessage.  We are going to do this in the ngOnInit just to verify that the error message will display:</p>
<pre><code class="lang-TypeScript"> this.errorMessage = &#39;testing&#39;
</code></pre>
</li>
<li><p>Now if you go to <a href="http://localhost:4200">http://localhost:4200</a> you will see the following display</p>
<p> <img src="images/error-messages-display.png" alt="error message display"></p>
</li>
<li><p>We can remove the temporary value that we set for the errorMessage.</p>
</li>
</ol>
<div class="alert alert-danger" role="alert">For now, you will need to 1st hit <a href="http://localhost:4200/login">http://localhost:4200/login</a> before you can successfully save a todo item since they are associated to a user.  After you have logged in, you can save as many items as you would like without hitting login again.  In the next chapter we will implement a login check that will redirect you to login first.</div>

<div class="exercise-end"></div>

<h3 id="displaying-items">Displaying Items</h3>
<p>Now that we have the ability to save our items, we need to be able to display the current list</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Get Todo Items 
</h4>

<p>First thing we need to do is add a function to the todo service to get the list of todo items.</p>
<ol>
<li><p>Open the src\app\shared\services\todo.service.ts file</p>
<pre><code class="lang-bash"> todo.service.ts
</code></pre>
</li>
<li><p>Add the following function to make an http get call to our Todo API and return back an array of Todo items.</p>
<pre><code class="lang-TypeScript"> getAll(): Observable&lt;Array&lt;Todo&gt;&gt;{
     let url = &quot;https://dj-sails-todo.azurewebsites.net/todo&quot;;
     return this.http.get(url, this.options)
     .map((res: Response) =&gt; {
         return &lt;Array&lt;Todo&gt;&gt;res.json();
     })
     .catch(error =&gt; {
         console.log(&#39;get error&#39;, error);
         return error;
     });
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Display Todo Items in the UI
</h4>

<p>Now that we have the TodoService.getAll function created, we are ready to call the function from our TodoComponent.  We will make this call in the ngOnInit function so that it will display the list on component render.</p>
<ol>
<li><p>Open the src\app\todo\todo.component.ts file</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Import the todo class </p>
<pre><code class="lang-TypeScript"> import { Todo } from &#39;../shared/classes/todo&#39;;
</code></pre>
</li>
<li><p>Create a variable in the TodoComponent class called todoList that is an array of Todo and intialize to an empty array</p>
<pre><code class="lang-TypeScript"> todoList: Array&lt;Todo&gt; = [];
</code></pre>
</li>
<li><p>Create the getTodoListAll function that will return void, call the TodoService.getAll function and set a todoList variable at the Todocomponent class level.</p>
<pre><code class="lang-TypeScript"> getTodoListAll(): void {
 this.todoService.getAll()
   .subscribe(
   data =&gt; {
     this.todoList = data;
   },
   error =&gt; {
     this.errorMessage = &lt;any&gt;error;
   }
   );
 }
</code></pre>
</li>
<li><p>Now we are ready to call the getTodoListAll function in ngOnInit</p>
<pre><code class="lang-TypeScript"> this.getTodoListAll();
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Html to Display Items
</h4>

<ol>
<li><p>Open the src\app\todo\todo.component.html</p>
<pre><code class="lang-bash"> todo.component.html
</code></pre>
</li>
<li><p>Since we have our form working, remove the form status table.</p>
</li>
<li><p>After the error message alert, add the following html to display the list of todo items</p>
<pre><code class="lang-html"> &lt;div class=&quot;row&quot; *ngFor=&quot;let todoItem of todoList&quot;&gt;
   &lt;div class=&quot;col-12 done-{{todoItem.completed}}&quot;&gt;
     {{todoItem.item}} &lt;small&gt;created: {{todoItem.createdAt | date:&#39;short&#39;}}&lt;/small&gt;
   &lt;/div&gt;
 &lt;/div&gt;
</code></pre>
<ul>
<li>the *ngFor will loop through all of the items in the todoList variable that we will be creating next.  </li>
<li>For the date, we are using the built-in date pipe to convert it to a short date that strips out the time part of the date</li>
<li>We are also setup to have a different style when an item is completed.  We will add the styling in a bit.    </li>
</ul>
</li>
</ol>
<div class="alert alert-danger" role="alert">For now, you will need to 1st hit <a href="http://localhost:4200/login">http://localhost:4200/login</a> before you can successfully pull the list of todo items since they are associated to a user.  In the next chapter we will implement a login check that will redirect you to login first.</div>

<div class="exercise-end"></div>

<h3 id="update-list-on-save">Update List on Save</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Updating Todo list on save 
</h4>

<p>Now that we have the Todo list being stored in the todoList variable, when we save a new todo item, we can add it to the todoList array and the todo list will automatically update with the change.</p>
<ol>
<li><p>Open todo.component.ts</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>In the todo.component.ts file, we need to update the save function to push the save result into the todoList array. We need to add this code into the subscribe of the <code>TodoService.save</code> call. </p>
<pre><code class="lang-TypeScript"> this.todoList.push(result);
</code></pre>
</li>
<li><p>When you add a new todo item, the list will now update itself.</p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="complete-todo">Complete Todo</h3>
<p>Right now the todo list is just a read only view.  However, we need to have the ability to complete a todo item.  We are going to add an icon to the todo list that will toggle the completed state and save the todo item.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Save Updated Todo Item
</h4>

<ol>
<li><p>Open the src\app\shared\services\todo.service.ts file</p>
<pre><code class="lang-bash"> todo.service.ts
</code></pre>
</li>
<li><p>We are going to create an update method that will take in a Todo item and make an  http put call to our API to update the one record with the new completion state.</p>
<pre><code class="lang-TypeScript"> updateTodo(todo: Todo): Observable&lt;Todo&gt; {
     let url = `https://dj-sails-todo.azurewebsites.net/todo/${todo.id}`;

     return this.http.put(url, todo, this.options)
     .map((res: Response) =&gt; &lt;Todo&gt;res.json())
     .catch(error =&gt; {
         console.log(&#39;update error&#39;, error);
         return error;
     });
 }
</code></pre>
<ul>
<li>For the url we are using string interpolation to create the url.  This is done with the &#96;&#96; tags and the ${}</li>
<li>An HTTP PUT call is used to update a record and requires an ID as part of the URL to figure out which record you are updating</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Enable Toggle in UI and Save
</h4>

<p>Now we need to call the updateTodo function that we just created in the TodoService from our UI component.</p>
<ol>
<li><p>Open the todo.component.ts file</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Create the completeTodo method that the UI will call </p>
<pre><code class="lang-TypeScript"> completeTodo(todo: Todo): void {
     todo.completed = !todo.completed;
     this.todoService.updateTodo(todo)
     .subscribe(
         data =&gt; {
             // do nothing
         },
         error =&gt; {
             todo.completed = !todo.completed;
             this.errorMessage = &lt;any&gt;error;
             console.log(&#39;complete error&#39;, this.errorMessage);
         });
 }
</code></pre>
<ul>
<li>For now we are not going to do anything with the returned result.  In the future you could call a sort function or update an open todo item counter.</li>
</ul>
</li>
</ol>
<p>The last thing we need to do it do update the UI to have a checkbox icon that will be clicked on to toggle the completion state.</p>
<ol>
<li><p>Open the todo.component.html file</p>
<pre><code class="lang-bash"> todo.component.html
</code></pre>
</li>
<li><p>Inside the ngFor loop, above the existing div that is displaying the individual item, add the following icon that uses the Font Awesome library for the icon and is set to take up 1 column of space</p>
<pre><code class="lang-html">   &lt;div class=&quot;col-1&quot; (click)=&quot;completeTodo(todoItem)&quot;&gt;&lt;i [className]=&quot;todoItem.completed ? &#39;fa fa-check-square-o&#39; : &#39;fa fa-square-o&#39;&quot;&gt;&lt;/i&gt;&lt;/div&gt;
</code></pre>
<ul>
<li>We are passing in the todo item that we are wanting to update to the completedTodo function.  This will pass in the whole object so we have access to all of the fields.</li>
<li>We are updating the icon used based on the completed field state.  If completed we are using fa-check-square-o.  If not completed, we are using fa-square-o</li>
</ul>
</li>
<li><p>With Bootstrap it is a 12 column grid, so we need to reduce the size of the existing div from col-12 to col-11 in order to fit in the complete checkbox</p>
 <div class="alert alert-info" role="alert">The reason that we used the Bootstrap grid is so that everything wrapped correctly with longer todo items and when the screen was smaller.  The Bootstrap grid provides this functionality automatically for you.</div>
</li>
<li><p>The html for the display of the Todo list should look like the following:</p>
<pre><code class="lang-html"> &lt;div class=&quot;row todo&quot; *ngFor=&quot;let todoItem of todoList&quot;&gt;
     &lt;div class=&quot;col-1&quot; (click)=&quot;completeTodo(todoItem)&quot;&gt;&lt;i [className]=&quot;todoItem.completed  ? &#39;fa fa-check-square-o&#39; : &#39;fa fa-square-o&#39;&quot;&gt;&lt;/i&gt;&lt;/div&gt;
     &lt;div class=&quot;col-11 done-{{todoItem.completed}}&quot;&gt;{{todoItem.item}} &lt;br /&gt;&lt;small&gt;created: {{todoItem.createdAt | date:&#39;short&#39;}}&lt;/small&gt;&lt;/div&gt;
 &lt;/div&gt;
</code></pre>
</li>
</ol>
<div class="alert alert-danger" role="alert">For now, you will need to 1st hit <a href="http://localhost:4200/login">http://localhost:4200/login</a> before you can successfully update a todo item since they are associated to a user.  After you have logged in, you can update as many items as you would like without hitting login again.  In the next chapter we will implement a login check that will redirect you to login first.</div>

<div class="exercise-end"></div>

<h3 id="delete-todo">Delete Todo</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Delete Todo Item from Data Store
</h4>

<p>In addition to being able to complete a todo item, we also need to be able to delete one.  We need to add an icon to the todo list that will call a delete function in the component and delete the todo item from our database.</p>
<ol>
<li><p>Open the src\app\shared\services\todo.service.ts file</p>
<pre><code class="lang-bash"> todo.service.ts
</code></pre>
</li>
<li><p>We need to create a delete method that will call our API using http.delete</p>
<pre><code class="lang-TypeScript"> deleteTodo(todo: Todo): Observable&lt;Response&gt; {
     let url = `https://dj-sails-todo.azurewebsites.net/todo/${todo.id}`;
     return this.http.delete(url, this.options)
     .catch(error =&gt; {
         console.log(&#39;delete error&#39;, error);
         return error;
     });
 }
</code></pre>
<ul>
<li>We are passing in the todo item id that we are wanting to delete.</li>
<li>We are not doing any kind of mapping of the return results since there is none.  It is either successful or not.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add Delete Option to UI
</h4>

<p>Next we need to create the deleteTodo item function in the component that will call the TodoService.delete function</p>
<ol>
<li><p>Open the todo.component.ts file</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>We need to create a function that will call the todoService.deleteTodo function and then remove the item from the todoList array that is being used by the UI to display the todo items.</p>
<pre><code class="lang-TypeScript"> deleteTodo(todo: Todo): void {
     this.todoService.deleteTodo(todo)
     .subscribe(
     data =&gt; {
         let index = this.todoList.indexOf(todo);
         this.todoList.splice(index, 1);
     },
     error =&gt; {
         todo.completed = !todo.completed;
         this.errorMessage = &lt;any&gt;error;
         console.log(&#39;complete error&#39;, this.errorMessage);
     });
 }
</code></pre>
 <div class="alert alert-info" role="alert">Note: We could have also just called the TodoService.getAll function but since we already have all of the items and the items are specific to a single user, there is no need to make the extra database call.</div>

</li>
</ol>
<p>The last thing that we need to do is to add the delete icon to the todo list.</p>
<ol>
<li><p>Open the todo.component.html file</p>
<pre><code class="lang-bash"> todo.component.html
</code></pre>
</li>
<li><p>After the div that displays the todo item and date but still inside of the ngFor div, we need to add a div that will hold the delete icon.  We will be using the fa-trash icon.  When the icon is clicked it will call the TodoComponent.deleteTodo function.  The icon is going to take up 1 column of space in the grid.</p>
<pre><code class="lang-TypeScript"> &lt;div class=&quot;col-1&quot; (click)=&quot;deleteTodo(todoItem)&quot;&gt;&lt;i class=&quot;fa fa-trash&quot;&gt;&lt;/i&gt;&lt;/div&gt;
</code></pre>
</li>
<li><p>Since the Bootstrap grid is 12 columns wide, we need to reduce the text div from col-11 to col-10 to be able to fit in the delete icon.</p>
 <div class="alert alert-info" role="alert">The reason that we used the Bootstrap grid is so that everything wrapped correctly with longer todo items and when the screen was smaller.  The Bootstrap grid provides this functionality automatically for you.</div>
</li>
<li><p>The html for the display of the Todo list should look like the following:</p>
<pre><code class="lang-html"> &lt;div class=&quot;row todo&quot; *ngFor=&quot;let todoItem of todoList&quot;&gt;
     &lt;div class=&quot;col-1&quot; (click)=&quot;completeTodo(todoItem)&quot;&gt;&lt;i [className]=&quot;todoItem.completed  ? &#39;fa fa-check-square-o&#39; : &#39;fa fa-square-o&#39;&quot;&gt;&lt;/i&gt;&lt;/div&gt;

     &lt;div class=&quot;col-10 done-{{todoItem.completed}}&quot;&gt;{{todoItem.item}} &lt;br /&gt;&lt;small&gt;created: {{todoItem.createdAt | date:&#39;short&#39;}}&lt;/small&gt;&lt;/div&gt;

     &lt;div class=&quot;col-1&quot; (click)=&quot;deleteTodo(todoItem)&quot;&gt;&lt;i class=&quot;fa fa-trash&quot;&gt;&lt;/i&gt;&lt;/div&gt;
 &lt;/div&gt;
</code></pre>
</li>
<li><p>You can now test the delete functionality.  Warning that it will not ask if you want to delete the item.  It will just delete it.</p>
 <div class="alert alert-danger" role="alert">For now, you will need to 1st hit <a href="http://localhost:4200/login">http://localhost:4200/login</a> before you can successfully delete a todo item since they are associated to a user.  After you have logged in, you can delete as many items as you would like without hitting login again.  In the next chapter we will implement a login check that will redirect you to login first.</div>

</li>
</ol>
<div class="exercise-end"></div>

<h3 id="adding-style">Adding Style</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Making the Todo list look nicer
</h4>

<p>Right now the UI looks decent but with a few tweaks it could look much better.  </p>
<p><img src="images/todo-unstyled.png" alt="todo unstyled"></p>
<p>If we added some padding around each row, a bottom border, made the date smaller and gray, increased the size of each icon and made the completed items gray with a strike-through, the UI would pop.</p>
<p>The first thing we need to do is add in our styles to the Todo component.  Since these styles are strictly for the Todo component we are going to add them into the todo.component.scss instead of the app&#39;s style.scss file.  </p>
<div class="alert alert-info" role="alert">Angular enables CSS encapsulation so that the styling in each components scss file will only be applied to that component and not the rest of the site.  They do this by adding an attribute to both the html elements and css classes that are rendered. It is done on the fly for you and does not at all change the actual files.</div>


<ol>
<li><p>Open the src\app\todo\todo.component.scss </p>
<pre><code class="lang-bash"> todo.component.scss
</code></pre>
</li>
<li><p>Add the following contents to the file.  To ensure we are following our branding, we are importing our scss color variables.</p>
<pre><code class="lang-scss"> @import &quot;../../assets/bootstrap/variables&quot;;
 div.todo {
     width: 100%;
     padding-bottom: .2em;
     padding-top: .2em;
     border-bottom: 1px solid $gray-light;
     font-size: 1.4em;

     small {
         font-size: .7em;
         color: $gray-light;
     }

     i {
         width: 40px;
         padding-right: 10px;
         vertical-align: middle
     }

     .done-true {
         text-decoration: line-through;
         color: $gray-light;
     }
 }
</code></pre>
</li>
<li><p>Now if you view the UI it should look like below.  </p>
<p> <img src="images/todo-styled-final.png" alt="unstyled ui"></p>
</li>
</ol>
<div class="alert alert-danger" role="alert">For now, you will need to 1st hit <a href="http://localhost:4200/login">http://localhost:4200/login</a> before you can successfully get the todo item since they are associated to a user.  In the next chapter we will implement a login check that will redirect you to login first.</div>

<div class="exercise-end"></div>

<h3 id="review">Review</h3>
<p>We did a lot in this chapter implementing our Reactive form</p>
<ol>
<li>Created a form using the FormBuilder</li>
<li>Added validation to the FormBuilder</li>
<li>Created a value change observable to set the field validation messages</li>
<li>Added debounce to wait for a second after the user stops typing before checking the field validation</li>
<li>Show the list of todo list with icons to complete and delete todo items</li>
<li><p>We used several Angular directives to implement functionality in the UI:</p>
<ul>
<li>*ngIf - replacement for ng-if.  Only show section if condition is true</li>
<li>*ngFor - replacement for ng-repeat.  Loop through a list and do something</li>
<li>[(ngModel)] - two-way data binding</li>
<li>(click) - binds to the click event</li>
<li>[className] - replacement for ngClass and set the css class for the element</li>
<li>(ngModelChange) - runs method when the [(ngModel)] value changes</li>
<li>[hidden] - hides the element when condition is true </li>
<li>(ngSubmit) - submits a form </li>
<li>[formGroup] - used for reactive forms.  basically dynamic forms that you can control in the controller</li>
<li>[disabled] - set the element to disabled when condition is true</li>
</ul>
</li>
</ol>
<h4 id="possible-enhancements">Possible Enhancements</h4>
<ul>
<li>Sort the data in the UI by name and completed status so that all of the todo items that are not done are at the top and sorted alphabetically.</li>
<li>Add a counter that tracked number of open items</li>
<li>Clear the form after add</li>
</ul>
<p>The walk through for these enhancements is in the bonus chapter for the Additional Todo Features.</p>
<div class="exercise-end"></div>

				</div>
				<hr>
				<div class="chapter">
					<h2 id="locking-down-routes">Locking Down Routes</h2>
<h3 id="overview">Overview</h3>
<p>Right now in order to use our Todo list, we have to manually go to the login page first.  This is a terrible user experience.  Luckily, Angular has the ability to do checks before allowing a user into a route by implementing a guard on a route.  </p>
<p>Guards allow you to authentication or authorization check before allowing a user to perform an action.  Common usage cases are: </p>
<ul>
<li>Role checks such as admin before allowing the user into the admin section of the application</li>
<li>Is the user logged in check before allowing them into the page the pulls or updates data </li>
<li>Is the user logged out before allowing them to create an account</li>
</ul>
<p>In this chapter we are going to implement a check for if the user is logged in before allowing them to view the home page and interact with the Todo list.</p>
<h3 id="goals">Goals</h3>
<ul>
<li>Understand how to protect a route</li>
<li>Understand how to use a guard</li>
</ul>
<h3 id="code-from-previous-chapter">Code from Previous Chapter</h3>
<div class="alert alert-danger" role="alert">Skip this section if you completed the previous chapter</div>

<p>If you have not completed the previous chapter you can get the completed code by downloading the code from Github.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Downloading Code 
</h4>

<ol>
<li>Downloading and extracting the zip file into your projects folder (c:\projects or ~/projects) at <a href="https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-reactive-forms.zip">https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-reactvive-forms.zip</a> </li>
<li><p>After you get the code, run npm install to get all of the NPM dependencies.</p>
<pre><code class="lang-bash"> npm install
</code></pre>
</li>
<li><p>Open Visual Studio Code</p>
</li>
<li>In Visual Studio Code, go under the File menu, select Open folder and navigate to the folder that you unzipped the files into</li>
<li>If you have ng serve running in a different editor, make sure to stop it from running.</li>
<li><p>Open the Integrated Terminal in Visual Studio Code (ctrl + `)  and run ng serve</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="create-guard">Create Guard</h3>
<h4 class="exercise-start">
  <b>Exercise</b>: Check If User Is Logged In
</h4>

<ol>
<li><p>Open terminal and generate the guard </p>
<pre><code class="lang-bash">ng generate guard shared/guards/IsLoggedIn --module App
</code></pre>
<p><img src="images/isloggedin-generate.png" alt="generate output"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-logic-to-guard">Add Logic to Guard</h3>
<h4 class="exercise-start">
  <b>Exercise</b>: Check If User Is Authenticated
</h4>

<p>We need to make a call to the API to check if the user is logged into the API or not.  Since the login happens in the API, we need to check there and not just verify that we have the user info in the UI.</p>
<ol>
<li><p>Open the src\app\shared\services\auth.service.ts file</p>
<pre><code class="lang-bash">auth.service.ts
</code></pre>
</li>
<li><p>Add an isAuthenticated function to the AuthService that checks the API to make sure that the user is still logged in</p>
<pre><code class="lang-TypeScript">isAuthenticated(): Observable&lt;boolean&gt; {
 return this.http.get(&quot;https://dj-sails-todo.azurewebsites.net/user/identity&quot;, this.options)
   .map((res: Response) =&gt; {
     if (res) {
       return Observable.of(true);
     }

     return Observable.of(false);
   })
   .catch((error: Response) =&gt; {
     if (error.status !== 403) {
       console.log(&#39;isAuthenticated error&#39;, error);
     }

     return Observable.of(false);
   });
}
</code></pre>
</li>
</ol>
<p>Next we need to add logic to the guard&#39;s canActivate function to call the AuthService.isAuthenticated function </p>
<ol>
<li><p>Open src\app\shared\guards\is-logged-in.guard.ts </p>
<pre><code class="lang-bash">is-logged-in.guard.ts
</code></pre>
</li>
<li><p>Import the AuthService</p>
<pre><code class="lang-TypeScript">import { AuthService } from &#39;../services/auth.service&#39;;
</code></pre>
</li>
<li><p>We are going to redirect our user to the home page if they are logged.  In order to do this we need to add the Router to the @angular/route import statement like so</p>
<pre><code class="lang-TypeScript">import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot , Router} from &#39;@angular/router&#39;;
</code></pre>
</li>
<li><p>Before we can use the AuthService and router we need to create a constructor and inject them into it </p>
<pre><code class="lang-TypeScript">constructor(private authService: AuthService, private router: Router) { }
</code></pre>
</li>
<li><p>In the canActivate function we need to replace the return true with the following logic that will call the AuthService.isAuthenticated function and  return if the user is logged in or not.  If the user is not logged in or there is an error validating if they are logged in then we will navigate them to the login route else we will let them into the route</p>
<pre><code class="lang-TypeScript"> let isLoggedIn = new Observable&lt;boolean&gt;(observer =&gt; {
 this.authService.isAuthenticated()
   .subscribe((res: boolean) =&gt; {
   if (res) {
     observer.next(true);
     observer.complete();
   } else {
     this.router.navigate([&#39;/login&#39;]);
     observer.next(false);
     observer.complete();
   }
   }, error =&gt; {
     this.router.navigate([&#39;/login&#39;]);
     observer.next(false);
     observer.complete();
   });
 });

 return isLoggedIn;
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="add-guard-to-route">Add Guard to Route</h3>
<p>In order to use the Guard we need to add it to the route.  Each route has a canActivate attribute that takes an array of guards as the 3rd parameter.</p>
<h4 class="exercise-start">
  <b>Exercise</b>: Add Guard to Route
</h4>

<ol>
<li><p>Open the app-routing.module.ts file</p>
<pre><code class="lang-bash">app-routing.module.ts
</code></pre>
</li>
<li><p>Import the IsLoggedInGuard</p>
<pre><code class="lang-TypeScript">import { IsLoggedInGuard} from &#39;./shared/guards/is-logged-in.guard&#39;
</code></pre>
</li>
<li><p>To the default route, add the canActivate attribute with the value being an array that contains the IsLoggedInGuard</p>
<pre><code class="lang-TypeScript">, 
canActivate: [IsLoggedInGuard]
</code></pre>
</li>
<li><p>You route should look like</p>
<pre><code class="lang-TypeScript">{
 path: &#39;&#39;,
 children: [],
 component: TodoComponent,
 canActivate: [IsLoggedInGuard]
},
</code></pre>
</li>
<li><p>When you try to go to <a href="http://localhost:4200">http://localhost:4200</a> if you are not already logged in it will redirect you to the login page.  </p>
</li>
</ol>
<div class="exercise-end"></div>



				</div>

				<hr>
				<div class="chapter">
					<h2 id="environment-configuration">Environment Configuration</h2>
<h3 id="overview">Overview</h3>
<p>So far we have been hard coding our API url into our services which means we have the base url in multiple places.  Instead we should be using a configuration file that stores the API in one place and allows us to use it anywhere in the application.  Luckily, Angular comes with environment configuration files that allow us to do just that.  </p>
<p>The different environment configurations are stored in the src\environments folder.</p>
<h3 id="goals">Goals</h3>
<ul>
<li>Learn how to change configurations per environment</li>
<li>Implement environment configurations</li>
</ul>
<h3 id="code-from-previous-chapter">Code from Previous Chapter</h3>
<div class="alert alert-danger" role="alert">Skip this section if you completed the previous chapter</div>

<p>If you have not completed the previous chapter you can get the completed code by downloading the code from Github.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Downloading Code 
</h4>

<ol>
<li>Downloading and extracting the zip file into your projects folder (c:\projects or ~/projects) at <a href="https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-lock-down-routes.zip">https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-lock-down-routes.zip</a> </li>
<li><p>After you get the code, run npm install to get all of the NPM dependencies.</p>
<pre><code class="lang-bash"> npm install
</code></pre>
</li>
<li><p>Open Visual Studio Code</p>
</li>
<li>In Visual Studio Code, go under the File menu, select Open folder and navigate to the folder that you unzipped the files into</li>
<li>If you have ng serve running in a different editor, make sure to stop it from running.</li>
<li><p>Open the Integrated Terminal in Visual Studio Code (ctrl + `)  and run ng serve</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="default-configuration">Default Configuration</h3>
<p>The src\environments\environment.ts file is the default configurations if no environment is specified when running <code>ng serve</code></p>
<p>In the environment.ts we need to add the environmentName and apiBaseUrl values.  The apiBaseUrl is the  base url for our API and the environment name is an easy recognizable name for the environment.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Setup Default Configuration
</h4>

<ol>
<li><p>Open the src\environments\environment.ts file</p>
<pre><code class="lang-bash"> environment.ts
</code></pre>
</li>
<li><p>Add the environmentName and apiBaseUrl values to the environment object.  </p>
<pre><code class="lang-TypeScript"> environmentName: &#39;Development&#39;,
 apiBaseUrl: &#39;https://dj-sails-todo.azurewebsites.net&#39;
</code></pre>
</li>
<li><p>The environment object should look like the following</p>
<pre><code class="lang-TypeScript"> export const environment = {
     production: false,
     environmentName: &#39;Development&#39;,
     apiBaseUrl: &#39;https://dj-sails-todo.azurewebsites.net&#39;
 };
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="production-configuration">Production Configuration</h3>
<p>The src\environments\environment.prod.ts file is the production configuration.  We need to add in the environmentName and apiBaseUrl that we added to the default configuration.  </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Update Production Configuration
</h4>

<ol>
<li><p>Open the src\environments\environment.prod.ts file</p>
<pre><code class="lang-bash"> environment.prod.ts
</code></pre>
</li>
<li><p>Add the environmentName and apiBaseUrl values to the environment object.  </p>
<pre><code class="lang-TypeScript"> environmentName: &#39;Development&#39;,
 apiBaseUrl: &#39;https://dj-sails-todo.azurewebsites.net&#39;
</code></pre>
</li>
<li><p>The environment object should look like the following</p>
<pre><code class="lang-TypeScript"> export const environment = {
     production: true,
     environmentName: &#39;Production&#39;,
     apiBaseUrl: &#39;https://dj-sails-todo.azurewebsites.net&#39;
 };
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="local-development">Local Development</h3>
<p>The other environment that is typically created is for local development on your machine.  For this tutorial the environment.ts and local.ts have the same values but once you go from development to production they will differ.   </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create Local Configuration
</h4>

<ol>
<li><p>Create the file src\environments\environment.local.ts file by right-clicking on the src\environments directory and selecting new file</p>
<pre><code class="lang-bash"> environment.local.ts
</code></pre>
</li>
<li><p>Add the following to the environment.local.ts file</p>
<pre><code class="lang-TypeScript"> export const environment = {
     production: false,
     environmentName: &#39;Local&#39;,
     apiBaseUrl: &#39;https://dj-sails-todo.azurewebsites.net&#39;
 };
</code></pre>
</li>
<li><p>In order to use the environment.local.ts file we need to tell the Angular CLI that it exist by adding it to the environments section of the .angular-cli.json that is in the root of the project.  </p>
<pre><code class="lang-bash"> .angular-cli.json
</code></pre>
</li>
<li><p>Find the apps\environments section and add the local configuration to the at the top of the list of environments)</p>
<pre><code class="lang-json"> &quot;local&quot;: &quot;environments/environment.local.ts&quot;,
</code></pre>
 <div class="alert alert-info" role="alert">Note that the order of the environments is not important</div>
</li>
<li><p>The environments section should look like</p>
<pre><code class="lang-TypeScript">   &quot;environments&quot;: {
     &quot;local&quot;: &quot;environments/environment.local.ts&quot;,
     &quot;dev&quot;: &quot;environments/environment.ts&quot;,
     &quot;prod&quot;: &quot;environments/environment.prod.ts&quot;
   }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Updating Services With Environment Url
</h4>

<p>Now that we have the API url in the environments file, we need update the TodoService and AuthService to use the base url from the environments file instead of having it hard coded.  We should also create a variable in each of the services to hold the base url so we don&#39;t have it all over the place in the services.</p>
<ol>
<li><p>Open the src\app\shared\services\todo.service.ts file</p>
<pre><code class="lang-bash"> todo.service.ts
</code></pre>
</li>
<li><p>Import the environment file</p>
<pre><code class="lang-TypeScript"> import { environment } from &#39;../../../environments/environment&#39;;
</code></pre>
</li>
<li><p>Create a private variable called url inside the TodoService class that gets the apiBaseUrl from the environment file and append on the /todo</p>
<pre><code class="lang-TypeScript">   private url: string = `${environment.apiBaseUrl}/todo`;
</code></pre>
</li>
<li><p>For the save and getAll function update the hard coded url to use the class level url variable.  Don&#39;t forget due to scoping that you need to access the variable by using this.url </p>
<pre><code class="lang-TypeScript"> this.url
</code></pre>
</li>
<li><p>For the updateTodo and deleteTodo we need to replace the hard coded url with the class level url variable.  Since we are already using string interpolation to create the string, we need to replace the hard coded value with <code>${this.url}</code></p>
<pre><code class="lang-TypeScript"> let url = `${this.url}/${todo.id}`;
</code></pre>
</li>
<li><p>Everything should still work to list, insert, update and delete todo items as before but now the url is no longer hard coded and can easily be changed as you move to different environments.</p>
</li>
<li><p>Now repeat the same process with the AuthService</p>
<pre><code class="lang-bash"> auth.service.ts
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Testing Configurations
</h4>

<h4 id="default">Default</h4>
<p>If an environment is not passed into the ng serve command, then it will default to using the environment.ts file</p>
<ol>
<li>Go to the terminal that is running the <code>ng serve</code> command and do a ctrl+c to stop it.</li>
<li><p>Run the <code>ng serve</code> command again.</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
<li><p>Everything should still start as normal.  You will not see any changes at this point since nothing is using those settings.  We will use them in a bit in our footer and our services.</p>
</li>
</ol>
<h4 id="local">Local</h4>
<p>If you want to run the local configuration we need to pass in the environment command line argument.  The environment argument value is the name of the environment name in the angular-cli.json file.  Note that you can only have 1 ng serve running at a time.    </p>
<ol>
<li>Go to the terminal that is running <code>ng serve</code> and do a ctrol+c to stop it</li>
<li><p>Run the <code>ng serve</code> command with the -e and specify the local environment</p>
<pre><code class="lang-bash"> ng serve -e local
</code></pre>
</li>
<li><p>If the Angular compile was successful, you will now be using the local environment configuration. Since our API urls are the same between files you will not see any difference at this time.  In the Header and Footer chapter we will add a footer that displays the environment name.</p>
</li>
</ol>
<div class="exercise-end"></div>

				</div>

				<hr>
				<div class="chapter">
					<h2 id="implementing-default-route">Implementing Default Route</h2>
<h3 id="overview">Overview</h3>
<p>Right now if the user types in a route that Angular does not know about you will get the following error</p>
<p><img src="images/ng2/no-route-found.png" alt="no route found"></p>
<p>I prefer to solve this problem by creating a &quot;Not Found&quot; component and then redirecting the user to this component if they try to navigate to a route that does not exist.</p>
<h3 id="goals">Goals</h3>
<ul>
<li>Understand how to deal with an unknown route</li>
</ul>
<h3 id="code-from-previous-chapter">Code from Previous Chapter</h3>
<div class="alert alert-danger" role="alert">Skip this section if you completed the previous chapter</div>

<p>If you have not completed the previous chapter you can get the completed code by downloading the code from Github.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Downloading Code 
</h4>

<ol>
<li>Downloading and extracting the zip file into your projects folder (c:\projects or ~/projects) at <a href="https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-env-config.zip">https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-env-config.zip</a> </li>
<li><p>After you get the code, run npm install to get all of the NPM dependencies.</p>
<pre><code class="lang-bash"> npm install
</code></pre>
</li>
<li><p>Open Visual Studio Code</p>
</li>
<li>In Visual Studio Code, go under the File menu, select Open folder and navigate to the folder that you unzipped the files into</li>
<li>If you have ng serve running in a different editor, make sure to stop it from running.</li>
<li><p>Open the Integrated Terminal in Visual Studio Code (ctrl + `)  and run ng serve</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="create-not-found-component">Create Not Found Component</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Redirecting User to &quot;Not Found&quot; component
</h4>

<ol>
<li><p>Open the integrated terminal and generate the notFound component </p>
<pre><code class="lang-bash"> ng generate component notFound
</code></pre>
</li>
<li><p>4 files are created just like when we created the TodoComponent earlier.  You will notice this time though that the Angular Cli put a dash between not and found.  It will automatically do that when it encounters an uppercase character.</p>
<p> <img src="images/ng2/notfound-generated.png" alt="not found generated file list"></p>
</li>
<li><p>Open src\app\app-routing.module.ts</p>
<pre><code class="lang-bash"> app-routing.module.ts
</code></pre>
</li>
<li><p>add an import statement for the NotFoundComponent </p>
<pre><code class="lang-TypeScript"> import { NotFoundComponent } from &#39;./not-found/not-found.component&#39;;
</code></pre>
</li>
<li><p>Add the ** route to and set it to use the NotFoundComponent</p>
<pre><code class="lang-TypeScript"> { path: &#39;**&#39;, component: NotFoundComponent }
</code></pre>
</li>
<li><p>Your routes should look like so</p>
<pre><code class="lang-TypeScript"> const routes: Routes = [
     {
         path: &#39;&#39;,
         children: [],
         component: TodoComponent,
         canActivate: [IsLoggedInGuard]
     },
     { path: &#39;login&#39;, children: [], component: LoginComponent },
     { path: &#39;signup&#39;, component: SignupComponent },
     { path: &#39;**&#39;, component: NotFoundComponent }
 ];
</code></pre>
</li>
<li><p>If you now try to navigate to <a href="http://localhost:4200/unknown">http://localhost:4200/unknown</a> you will be shown the NotFoundComponent </p>
<p> <img src="images/view-route-unknown.png" alt="Not Found View"></p>
</li>
</ol>
<p>The only thing left for you to do is to design what you want your not found page to actually say.  </p>

				</div>

				<hr>
				<div class="chapter">
					<h2 id="header-and-footer">Header and footer</h2>
<h3 id="overview">Overview</h3>
<p>In most web sites we have a header and footer at the top and bottom of the page respectively with our logo, navigation, and important links.  The header will contain our logo and navigation menu while the footer will contain our copyright info. </p>
<h3 id="goals">Goals</h3>
<ul>
<li>Understand how to create a new component</li>
<li>Understand how to include components inside of other components</li>
<li>Understand how to utilize Bootstrap </li>
</ul>
<h3 id="code-from-previous-chapter">Code from Previous Chapter</h3>
<div class="alert alert-danger" role="alert">Skip this section if you completed the previous chapter</div>

<p>If you have not completed the previous chapter you can get the completed code by downloading the code from Github.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Downloading Code 
</h4>

<ol>
<li>Downloading and extracting the zip file into your projects folder (c:\projects or ~/projects) at <a href="https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-default-route.zip">https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-default-route.zip</a> </li>
<li><p>After you get the code, run npm install to get all of the NPM dependencies.</p>
<pre><code class="lang-bash"> npm install
</code></pre>
</li>
<li><p>Open Visual Studio Code</p>
</li>
<li>In Visual Studio Code, go under the File menu, select Open folder and navigate to the folder that you unzipped the files into</li>
<li>If you have ng serve running in a different editor, make sure to stop it from running.</li>
<li><p>Open the Integrated Terminal in Visual Studio Code (ctrl + `)  and run ng serve</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="create-header-component">Create Header Component</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Creating the header component
</h4>

<p>We can leave ng serve running while we make these changes and open up another Integrate Terminal for the commands below.</p>
<ol>
<li><p>Open the VSCode Integrated Terminal and run the ng generate command to create the header component in the shared folder</p>
<pre><code class="lang-bash"> ng generate component shared/header
</code></pre>
</li>
<li><p>The generate command will create 4 files: </p>
<p> <img src="images/header-generate.png" alt="output of generate"></p>
<ul>
<li>scss (styles)</li>
<li>html (view)</li>
<li>spec file (test)</li>
<li>component (controller)</li>
<li>added a reference to the component in the app.module.ts file.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add the Menu 
</h4>

<ol>
<li><p>Open the src\app\shared\header.component.html file</p>
<pre><code class="lang-bash"> header.component.html
</code></pre>
</li>
<li><p>Replace the contents with the following. </p>
<pre><code class="lang-html"> &lt;header&gt;
     &lt;nav class=&quot;navbar navbar-toggleable-md navbar-light bg-faded&quot;&gt;
         &lt;button class=&quot;navbar-toggler navbar-toggler-right&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbarSupportedContent&quot;
         aria-controls=&quot;navbarSupportedContent&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;
         &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;
     &lt;/button&gt;
         &lt;a class=&quot;navbar-brand&quot; routerLink=&quot;/&quot;&gt;&lt;img class=&quot;navbar-logo&quot; src=&quot;./assets/todo_logo.png&quot; alt=&quot;Logo&quot;&gt;&lt;/a&gt;
         &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;
         &lt;ul class=&quot;nav navbar-nav mr-auto&quot;&gt;
             &lt;li class=&quot;nav-item active&quot;&gt;
                 &lt;a class=&quot;nav-link&quot; routerLink=&quot;/&quot;&gt;All Items&lt;/a&gt;
             &lt;/li&gt;
             &lt;li class=&quot;nav-item active&quot;&gt;
                 &lt;a class=&quot;nav-link&quot; routerLink=&quot;/unknown&quot;&gt;&quot;Unknown&quot;&lt;/a&gt;
             &lt;/li&gt;
             &lt;li class=&quot;nav-item active&quot;&gt;
                 &lt;a class=&quot;nav-link&quot; routerLink=&quot;/login&quot;&gt;Login&lt;/a&gt;
             &lt;/li&gt;
             &lt;li class=&quot;nav-item active&quot;&gt;
                 &lt;a class=&quot;nav-link&quot; routerLink=&quot;/signup&quot;&gt;Signup&lt;/a&gt;
             &lt;/li&gt;
         &lt;/ul&gt;
         &lt;/div&gt;
     &lt;/nav&gt;
 &lt;/header&gt;
</code></pre>
</li>
<li><p>Right-click on the logo below and save it to the src/assets folder of our project</p>
<p> <img src="images/todo_logo.png" alt="Logo"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="display-header">Display Header</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Update Main page
</h4>

<p>Now that we have created the menu, we need to add it to the app component so that it shows on every page. </p>
<p>One of the really cool things that we can do with components is include them inside of other components.  This makes it very easy to create reusable components.  </p>
<ol>
<li><p>Open the src\app\app.component.ts file </p>
<pre><code class="lang-bash">app.component.ts
</code></pre>
</li>
<li><p>Import the header component.  Add the import statement on line 2 right below the existing import statement.</p>
<pre><code class="lang-TypeScript"> import { HeaderComponent } from &#39;./shared/header/header.component&#39;;
</code></pre>
</li>
<li><p>Open the src\app\app.component.html file</p>
<pre><code class="lang-bash"> app.component.html
</code></pre>
</li>
<li><p>Add the app-header to the top of the html code</p>
<pre><code class="lang-html">&lt;app-header&gt;&lt;/app-header&gt;
</code></pre>
</li>
<li><p>If you view the web page you should see the header with logo, the menu and our banner.  To make it easy to navigate between the routes we have created, we added all of them to the menu.  Normally you would only add the ones that a user should directly get to by clicking on a link.</p>
<p><img src="images/header-view.png" alt="App Component with Header View"></p>
<div class="alert alert-info" role="alert">  To make it easy to navigate between the routes we have created, we added all of them to the menu.  Normally you would only add the ones that a user should directly get to by clicking on a link.</div>

</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Make Menu Responsive
</h4>

<p>Since we are not including JQuery in our application, when the Bootstrap menu the collapse button does not open up the menu.  To make the menu open we are going to use the Collapse component from the ng-bootstrap library.</p>
<ol>
<li><p>Open src\app\shared\header\header.component.ts</p>
<pre><code class="lang-bash"> header.component.ts
</code></pre>
</li>
<li><p>Create a variable named isCollapsed that is a boolean and set to false.  This will be used tdo hold if the menu is collapsed or not.</p>
<pre><code class="lang-TypeScript"> isCollapsed: boolean = true;
</code></pre>
</li>
<li><p>Create a function to toggle the menu named toggleMenu that sets isCollapsed set to the opposite of its current value</p>
<pre><code class="lang-TypeScript"> toggleMenu() {
     this.isCollapsed = !this.isCollapsed;
 }
</code></pre>
</li>
<li><p>Open up the src\app\shared\header\header.component.html</p>
<pre><code class="lang-bash"> header.component.html
</code></pre>
</li>
<li><p>To the button add a click event call to the toggleMenu function</p>
<pre><code class="lang-html"> (click)=&quot;toggleMenu()&quot;
</code></pre>
</li>
<li><p>To each link with a nav-link class add a click event that calls toggleMenu</p>
<pre><code class="lang-html"> (click)=&quot;toggleMenu()&quot;
</code></pre>
</li>
<li><p>Onto the div with the collapse class you need to add an <code>[ngbCollapse]</code> tag that is set to the isCollapsed variable</p>
<pre><code class="lang-html"> [ngbCollapse]=&quot;isCollapsed&quot;
</code></pre>
</li>
<li><p>Now if you shrink the browser small enough the collapsed menu will show up.  When you click on the menu icon or any of the links within the menu it will toggle the collapse state of the menu.</p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="create-footer">Create Footer</h3>
<p>Creating the footer is very similar to creating the header.  The biggest difference is that we have some css styling that we will apply to position the footer at the bottom of the page and shrink the body height so that text does not get stuck behind the footer.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Creating the footer component
</h4>


<ol>
<li><p>In the Integrated Terminal, run the ng generate command to create the header component</p>
<pre><code class="lang-bash"> ng generate component shared/footer
</code></pre>
</li>
<li><p>The generate command will create 4 files: </p>
<p> <img src="images/footer-generate.png" alt="Generate Output"></p>
<ul>
<li>scss (styles)</li>
<li>html (view)</li>
<li>spec file (test)</li>
<li>component (controller)</li>
<li>add reference to the component in the app.module.ts file.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>    


<h4 class="exercise-start">
    <b>Exercise</b>: Footer UI
</h4>

<ol>
<li><p>Open src\app\shared\footer\footer.component.html</p>
<pre><code class="lang-bash"> footer.component.html
</code></pre>
</li>
<li><p>Replace the contents with</p>
<pre><code> &lt;footer&gt;
     &lt;div class=&quot;pull-left&quot;&gt;
         &amp;copy;Angular WS
     &lt;/div&gt;
 &lt;/footer&gt;
</code></pre></li>
</ol>
<div class="exercise-end"></div>    

<h4 class="exercise-start">
    <b>Exercise</b>: Styling the Footer
</h4>

<p>We want to postion the footer at bottom of the page and change the background color.  </p>
<ol>
<li><p>Open src\app\footer\footer.component.scss file</p>
<pre><code class="lang-bash"> footer.component.scss
</code></pre>
</li>
<li><p>Add the following to make the footer at the bottom of the page with a height of 50px, a gray background and some padding around the div</p>
<pre><code class="lang-scss"> @import &quot;../../../assets/bootstrap/variables.scss&quot;;

 footer {
     position: fixed;
     height: 50px;
     bottom: 0;
     left: 0;
     right: 0;
     padding: 10px 5px;
     border-top: 1px solid $gray-light;
     background-color: $gray-lighter;
     font-size: 0.8em;
     color: $dark-blue;
     div {
         margin-left: 25px;
         margin-right: 25px;
     }
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="display-footer">Display Footer</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Update Main page
</h4>

<p>Now we are ready to add our footer to the Main page</p>
<ol>
<li><p>Open the src\app\app.component.ts file</p>
<pre><code class="lang-bash">app.component.ts
</code></pre>
</li>
<li><p>We need to import the FooterComponent before we can use it on the Main Page which is our AppComponent</p>
<pre><code class="lang-TypeScript">import { FooterComponent } from &#39;./shared/footer/footer.component&#39;;
</code></pre>
</li>
<li><p>Now we can add the <code>&lt;app-footer&gt;</code> tag in the src\app\app.component.html</p>
<pre><code class="lang-bash">app.component.html
</code></pre>
</li>
<li><p>Add the <code>&lt;app-footer&gt;</code> at the bottom of the html</p>
<pre><code class="lang-html"> &lt;app-footer&gt;&lt;/app-footer&gt;
</code></pre>
</li>
<li><p>If you view the web page you should see the footer </p>
<p><img src="images/footer-view.png" alt="App Works with Footer"></p>
</li>
</ol>
<div class="exercise-end"></div>


<h4 class="exercise-start">
    <b>Exercise</b>: Fixing body height
</h4>

<p>Since we have a static footer, will need to change the body height to account for the footer height.  Without doing this the body content will be hidden for the last 50px of the screen like it is currently doing if you have any todo items in your list.</p>
<p>Up to this point, we have only been dealing with component level styles.  For the body height, we want it to apply to the whole site.  We can do this by putting the styling in the src\style.scss file</p>
<ol>
<li><p>Open the src\style.scss file</p>
<pre><code class="lang-bash"> style.scss
</code></pre>
</li>
<li><p>Add the following css code to adjust the body height.  We are going an extra 10 pixels in height to give a little bit of padding around the text in the footer.</p>
<pre><code class="lang-html"> html {
     position: relative;
     height: auto;
     min-height: 100%;
 }

 body {
     position: static;
     height: auto;
     margin: 0 0 60px; /* bottom = footer height */
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add Environment Name to Footer
</h4>

<p>Earlier we created an environment name variable in the different Angular environment files.  Wouldn&#39;t it be nice if we displayed which environment we were in within the footer.</p>
<ol>
<li><p>Open the src\app\shared\footer\footer.component.ts file </p>
<pre><code class="lang-bash"> footer.component.ts
</code></pre>
</li>
<li><p>Import the environment into the file on line 2 right below the Angular core import</p>
<pre><code class="lang-TypeScript"> import { environment } from &#39;../../../environments/environment&#39;;
</code></pre>
</li>
<li><p>Inside the FooterComponent class we to add a variable to capture the environment name that Angular is running in</p>
<pre><code class="lang-TypeScript"> public env = environment.environmentName;
</code></pre>
</li>
</ol>
<p>Now we can display the env variable in our footer&#39;s html</p>
<ol>
<li><p>Open the src\app\shared\footer\footer.component.html file</p>
<pre><code class="lang-bash"> footer.component.html
</code></pre>
</li>
<li><p>After the &quot;Angular WS&quot; div but instead the footer tag add the following to display the env value</p>
<pre><code> &lt;div class=&quot;pull-right&quot;&gt;
     env: {{ env }}
 &lt;/div&gt;
</code></pre></li>
<li><p>If you view the web page you should see the footer </p>
<p><img src="images/footer-with-env.png" alt="App Works with Footer"></p>
<div class="alert alert-warning" role="alert">Notice that the env:Local in the footer is coming from the environment.local.ts file.  If you stop <code>ng serve</code> and run it without using the <code>-e local</code> argument, the env value will change to Development

    <img src="images/footer-with-env-dev.png" alt="footer development env">

</div>

</li>
</ol>
<div class="exercise-end"></div>  

<h3 id="review">Review</h3>
<p>In this chapter will learned:</p>
<ol>
<li>How to create new components</li>
<li>How to import and use components within other components</li>
<li>Learned about component level styles so that they only apply to a single component</li>
<li>Learned how to do global styles that apply to the whole site</li>
<li>Learned that if we have a static footer that we need to adjust the body margin height to stop content for being hidden behind the footer.</li>
<li>Learned that the <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> tag is used to tell Angular the location within the html code to render the routed component&#39;s template (html)</li>
</ol>

				</div>
	
				<hr>
				<div class="chapter">
					<h2 id="deploying">Deploying</h2>
<h3 id="overview">Overview</h3>
<p>Before deploy you will need to run an a build with the Angular CLI.  With the build you can tell it the environment to use and if it is a production build or not.  A production will minify everything.</p>
<h3 id="goals">Goals</h3>
<ul>
<li>Learn how to create a build that is ready to deploy.</li>
</ul>
<h3 id="non-production-build">Non-Production Build</h3>
<div class="alert alert-info" role="alert">
Note the build create a dist folder to hold the output.   This directory is removed before each build
</div>

<p>Select which type of build you want to run:  Non-Production or Production</p>
<h4 class="exercise-start">
  <b>Exercise</b>: Running Non-Production Build
</h4>

<p>Run the following command to run a build that uses the environment.ts file and is not a production build</p>
<pre><code class="lang-bash">ng build
</code></pre>
<div class="exercise-end"></div>

<h3 id="production-build">Production Build</h3>
<h4 class="exercise-start">
  <b>Exercise</b>: Running a Production Build
</h4>

<div class="alert alert-warning" role="alert">
Note that this will remove the dist directory before build.
</div>

<p>Run the following command to run a build that uses the environment.prod.ts file and is a production build.   The environment name must match the file name for it to be valid.</p>
<pre><code class="lang-bash">ng build --target=production --environment=prod
</code></pre>
<div class="exercise-end"></div>

				</div>
				
				<hr>
				<div class="chapter">
					<h2 id="bonus-additional-todo-features">Bonus: Additional Todo Features</h2>
<h3 id="overview">Overview</h3>
<p>Right now the Todo UI is fully functional but there is some nice usability enhancements we could implement.  For example:   </p>
<ul>
<li>The todo list is sorted by when it was created, it would be much nicer to sort alphabetically and by completion status.  </li>
<li>There is no way to see a count of how many items you have open.</li>
<li>The add form is not cleared out on successful save.</li>
</ul>
<h3 id="goals">Goals</h3>
<ul>
<li>Show how to sort on the client side</li>
<li>Show how to reset a form</li>
<li>Show how to a filtered an array and display the count of filtered items</li>
</ul>
<h3 id="code-from-previous-chapter">Code from Previous Chapter</h3>
<div class="alert alert-danger" role="alert">Skip this section if you completed the previous chapter</div>

<p>If you have not completed the previous chapter you can get the completed code by downloading the code from Github.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Downloading Code 
</h4>

<ol>
<li>Downloading and extracting the zip file into your projects folder (c:\projects or ~/projects) at <a href="https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-header-footer.zip">https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-header-footer.zip</a> </li>
<li><p>After you get the code, run npm install to get all of the NPM dependencies.</p>
<pre><code class="lang-bash"> npm install
</code></pre>
</li>
<li><p>Open Visual Studio Code</p>
</li>
<li>In Visual Studio Code, go under the File menu, select Open folder and navigate to the folder that you unzipped the files into</li>
<li>If you have ng serve running in a different editor, make sure to stop it from running.</li>
<li><p>Open the Integrated Terminal in Visual Studio Code (ctrl + `)  and run ng serve</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="displaying-open-item-count">Displaying Open Item Count</h3>
<p>It would be nice to know how many todo items that the user has and display that in the UI.  </p>
<p>Requirements:</p>
<ul>
<li>Display a count a open todo items without querying the API</li>
<li>Update the count when getting, updating and deleting the todo item list. </li>
</ul>
<h4 class="exercise-start">
    <b>Exercise</b>: Calculating Open Items
</h4>

<ol>
<li><p>Open the src\app\todo\todo.component.ts file</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Create a variable to hold the open count in the TodoComponent class that is of type number with a default value of 0</p>
<pre><code class="lang-TypeScript"> openItemCount: number = 0;
</code></pre>
</li>
<li><p>Create a function called calculateOpenItems that filters the todoList to only show when the completed status is false and get the length.</p>
<pre><code class="lang-TypeScript"> calculateOpenItems(): void {
     this.openItemCount = this.todoList.filter(item =&gt; item.completed === false).length;
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Calculate Item Count When Pulling Items
</h4>

<ol>
<li><p>In src\app\todo\todo.component.ts that we already have open, find the getTodoListAll function and add a call to the calculateOpenItems function after setting the todoList variable but still within the <code>data</code> function.  </p>
<pre><code class="lang-TypeScript"> this.calculateOpenItems();
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add Open Item Count to UI
</h4>

<p>Now that we have the todo open item count being calculating on component render, we are going to add it to the UI.  For now it will only be updated on component render.</p>
<ol>
<li><p>Open the src\app\todo\todo.component.html file</p>
<pre><code class="lang-bash"> todo.component.html
</code></pre>
</li>
<li><p>Inside of the page-header div after the &quot;Todo List&quot; title, add the following html</p>
<pre><code class="lang-html"> &lt;p class=&quot;lead&quot;&gt;You&#39;ve got &lt;em&gt;{{openItemCount}}&lt;/em&gt; things to do&lt;/p&gt;
</code></pre>
</li>
<li><p>The UI should now look like</p>
<p> <img src="images/todo-open-items.png" alt="open item count display">    </p>
</li>
</ol>
<div class="exercise-end"></div>



<h4 class="exercise-start">
    <b>Exercise</b>: Update Open Item Count on Add
</h4>

<ol>
<li><p>Open src\app\todo\todo.component.ts </p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Find the save method and increment the openItemCount after we push the new item into the todoList array</p>
<pre><code class="lang-TypeScript"> this.openItemCount++;
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Update Open Item on Complete 
</h4>

<p>When we toggle the completion status of a Todo item we also need to update the openItemCount value.  We want to make this update after successfully calling the TodoService.updateTodo service function.  Since it is a toggle we need to have a little bit of logic to figure out if the item was originally completed or not.  </p>
<ol>
<li><p>In the todo.component.ts file</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Find the completeTodo function and add the logic below in the subscribe data.  This logics reads if the todo item is completed then decrement the openItemCount else increment the openItemCount;</p>
<pre><code class="lang-TypeScript"> todo.completed ? this.openItemCount-- : this.openItemCount++;
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Update Open Item on Delete
</h4>

<p>The last thing we need to do is to re-calculate the openItemCount when an item is deleted.  We don&#39;t just decrement since a user can delete a completed it and there is no sense in adding in additional logic since the calculateOpenItems already has the logic.</p>
<ol>
<li><p>In the src\app\todo\todo.component.ts file</p>
<pre><code class="lang-bash">todo.component.ts
</code></pre>
</li>
<li><p>Find the deleteTodo function and add logic to decrement the openItemCount if the todo item being deleted was not completed.  You will want to put this call after the splice that removes the item from the todo list</p>
<pre><code class="lang-TypeScript"> if (todo.completed === false) this.openItemCount--;
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<p>Now when you fetch, add, complete or delete a todo item the open item count will be updated accordingly.  </p>
<h3 id="sort-in-the-ui">Sort in the UI</h3>
<p>Right now the data from the API is unsorted which makes the list hard to read.  It would be better sort alphabetically with the uncompleted items at the top.  </p>
<h4 id="requirements">Requirements</h4>
<ul>
<li>Sort by multiple fields</li>
<li>Sort is case insensitive</li>
<li>Sort for text fields can be done either ascending or descending </li>
<li>Sort should be generic and able to be used on any array</li>
<li>Completed items are at the bottom of the list</li>
<li>Each item is sorted by its text after sorting by the completed status</li>
<li>The sort is done on the client side and not in the API</li>
<li>Sorting is done when fetching, adding, and completing</li>
<li>Sorting does not need to be updated when deleting since the list is already sorted and we are just removing an item</li>
</ul>
<h4 class="exercise-start">
    <b>Exercise</b>: Creating Generic Function
</h4>

<ol>
<li>Open the Integrated Terminal</li>
<li><p>Use ng to generate a new class called FieldSorter in the shared/classes folder</p>
<pre><code class="lang-bash"> ng generate class shared/classes/FieldSorter
</code></pre>
</li>
<li><p>Open the src/app/shared/classes/field-sorter.ts file</p>
<pre><code class="lang-bash"> field-sorter.ts
</code></pre>
</li>
<li><p>To the FieldSorter class add the sort class below.  </p>
<pre><code class="lang-TypeScript"> // made static in order to not have to new up the class to use
 public static sort(fieldNames: Array&lt;string&gt;, ignoreCase: boolean) {
     return (item1: object, item2: object) =&gt; fieldNames.map((field: string) =&gt; {
         // A-Z sorting
         let direction: number = 1;

         // if field starts with - then Z-A sorting
         // strip off the - sign from field name
         if (field.substring(0, 1) === &#39;-&#39;) {
             direction = -1;
             field = field.substring(1);
         }

         // capture values so as not to change the original array field value
         // important when doing case insensitive searches else items would display in lowercase
         let item1Value = item1[field], item2Value = item2[field];

         // if ignoring case and field value is a type of string then call toLocaleLowerCase on both fields.  Used toLocaleLowerCase to accord for culture based sorting
         if (ignoreCase === true) {
             if (typeof item1Value === &#39;string&#39;) item1Value = item1Value.toLocaleLowerCase();
             if (typeof item2Value === &#39;string&#39;) item2Value = item2Value.toLocaleLowerCase();
         }

         // item1 is higher = 1, lower = -1, equal = 0
         return item1Value &gt; item2Value ? direction : item1Value &lt; item2Value ? -(direction) : 0;
     }).reduce((item1SortValue: number, item2SortValue: number) =&gt; {
         // values will be 1 or 0 based on the map function output.
         // if item1SortValue is 1 and item2SortValue is 0 then item1 goes 1st
         // if item1SortValue is 0 and item2SortValue is 1 then item2 goes 1st
         // if both are equal then item2 will go 1st
         return item1SortValue ? item1SortValue : item2SortValue
     }, 0);
 }
</code></pre>
<ul>
<li>We are using the map and reduce functions to accomplish our sorting task </li>
<li>It is a static function so that you do not have to new up the class in order to use it  </li>
<li>Parameters are an array of fieldNames that corresponds to a field in the array you are sorting and a boolean to decide if case is ignored</li>
<li>If you start a field name with a minus sign if will sort it descending</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>


<h4 class="exercise-start">
    <b>Exercise</b>: Add Sorting to UI
</h4>

<p>Now that we have our generic sorting method, we can create a function to do the actual sorting that can be called in the save, getTodoListAll, and completedTodo.  </p>
<ol>
<li><p>Open src\app\todo\todo.component.ts</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Add the following function to call the FieldSorter.sort and sort first by completed status and then by name.  </p>
<pre><code class="lang-TypeScript"> sortItems(): void {
     this.todoList.sort(FieldSorter.sort([&#39;completed&#39;, &#39;item&#39;], true));
 }
</code></pre>
</li>
<li><p>In the save, completeTodo and getTodoListAll functions after we have updated the todoList array, call the sortItems function</p>
<pre><code> this.sortItems();
</code></pre></li>
<li><p>Now when you fetch, add, and update todo items the list will stay sorted by completed status and then by item text.  The sort is also case insensitive.
 <img src="images/todo-sorted.png" alt="sorted output"></p>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="reset-form-after-save">Reset Form After Save</h3>
<p>Right now after you add a new todo item, the form does not clear out the input box.  This is really annoying as a user since you would not be entering the same todo item multiple times.  Since we only have 1 field we could set the field value to a blank string in the save method but that would not reset state.  Instead we want to call the reset function that is part of the FormGroup that we defined addForm as.   </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Sorting to UI
</h4>

<ol>
<li><p>Open src\app\todo\todo.component.ts</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Find the save function and in the result section add the form reset call</p>
<pre><code class="lang-TypeScript"> this.addForm.reset();
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="confirm-before-deleting">Confirm Before Deleting</h3>
<p>Right now when you delete an item it does not ask you at all for a confirmation.  This is a bad user experience as they could accidentally delete something important.</p>
<p>There are 3 ways that we could accomplish the confirmation:</p>
<ol>
<li>Create a custom dialog component that we can customize the look and feel of.</li>
<li>Use an component that someone else built like <a href="https://github.com/mattlewis92/angular-confirmation-popover#installation">https://github.com/mattlewis92/angular-confirmation-popover#installation</a></li>
<li>Use the built-in browser confirmation dialog.  With this option we do not have any control of the look and feel, only the title and message.</li>
</ol>
<p>For the sake of this workshop, we are going to go with option #3.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Delete Confirmation
</h4>

<ol>
<li><p>Open src\app\todo\todo.component.ts</p>
<pre><code class="lang-bash"> todo.component.ts
</code></pre>
</li>
<li><p>Find the deleteTodo function and wrap the contents of the function in the confirm call below.  Since TypeScript is just a super set of JavaScript we are able to use the confirm JavaScript syntax.</p>
<pre><code class="lang-TypeScript"> if (confirm(&quot;Are you sure you want to delete?&quot;)) {
     // delete call goes here
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

				</div>

				<hr>
				<div class="chapter">
					<h2 id="bonus-additional-login-features">Bonus: Additional Login Features</h2>
<h3 id="goals">Goals</h3>
<ul>
<li>Understand how to create a cookie with user information in it</li>
<li>Understand how to logout the user </li>
</ul>
<h3 id="code-from-previous-chapter">Code from Previous Chapter</h3>
<div class="alert alert-danger" role="alert">Skip this section if you completed the previous chapter</div>

<p>If you have not completed the previous chapter you can get the completed code by downloading the code from Github.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Downloading Code 
</h4>

<ol>
<li>Downloading and extracting the zip file into your projects folder (c:\projects or ~/projects) at <a href="https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-additional-todo.zip">https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-additional-todo.zip</a> </li>
<li><p>After you get the code, run npm install to get all of the NPM dependencies.</p>
<pre><code class="lang-bash"> npm install
</code></pre>
</li>
<li><p>Open Visual Studio Code</p>
</li>
<li>In Visual Studio Code, go under the File menu, select Open folder and navigate to the folder that you unzipped the files into</li>
<li>If you have ng serve running in a different editor, make sure to stop it from running.</li>
<li><p>Open the Integrated Terminal in Visual Studio Code (ctrl + `)  and run ng serve</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="caching-user">Caching User</h3>
<p>Right now when you refresh the page the current user information in the AuthService is lost.  We can cache the data using cookies.  To implement the cookie storage we are going to use the ngx-cookie library.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create Class
</h4>

<p>In the AuthService, in order to hold our user data and get type checking we need to create a TypeScript class with an email and id field.  We are going to leave the password field out of the class as we do not want to store this in memory at all.  </p>
<ol>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li><p>Run the ng generate command below to create the Authorization service.  I like to store my services under a shared\services folder.</p>
<pre><code class="lang-bash"> ng generate class shared/classes/User
</code></pre>
</li>
<li><p>The generate command will the user.ts file in the shared/classes folder: </p>
<p> <img src="images/user-generate.png" alt="output of generate"></p>
</li>
</ol>
<ol>
<li><p>Open the src\app\shared\classes\User.ts file</p>
<pre><code class="lang-bash"> user.ts
</code></pre>
</li>
<li><p>Within the User class, add the following fields.  Note that the  createdAt and updatedAt are automatically added by the API.</p>
<pre><code class="lang-TypeScript"> email: string;
 id: string;
 createdAt: Date;
 updatedAt: Date;
</code></pre>
</li>
<li><p>Within the User class and before the fields we just added, create a constructor that requires an email and make an id field optional (hint: the <code>?</code> makes the parameter optional)</p>
<pre><code class="lang-TypeScript"> constructor(email: string, id?: string, createdAt?: Date, updatedAt?: Date){
     this.email = email;
     this.id = id;
     this.createdAt = createdAt ? createdAt: new Date();
     this.updatedAt = updatedAt ? updatedAt: new Date();
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
  <b>Exercise</b>: Install ngx-cookie
</h4>

<ol>
<li><p>Open terminal and add/install the ngx-cookie library</p>
<pre><code class="lang-bash">npm install --save ngx-cookie
</code></pre>
</li>
<li><p>Open src\app\app.module.ts</p>
<pre><code class="lang-bash"> app.module.ts
</code></pre>
</li>
<li><p>Import the ngx-cookie library</p>
<pre><code class="lang-TypeScript"> import { CookieModule } from &#39;ngx-cookie&#39;;
</code></pre>
</li>
<li><p>Add the ngx-cookie library to the @Ngmodule imports sections</p>
<pre><code class="lang-TypeScript"> CookieModule.forRoot()
</code></pre>
<div class="exercise-end"></div>

</li>
</ol>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Cookie Get/Set Functions 
</h4>

<ol>
<li><p>Open the auth.service.ts file</p>
<pre><code class="lang-bash"> auth.service.ts
</code></pre>
</li>
<li><p>Import the User class that we created earlier</p>
<pre><code class="lang-TypeScript"> import { User } from &#39;../classes/user&#39;;
</code></pre>
</li>
<li><p>Import the CookieService from ngx-cookie</p>
<pre><code class="lang-TypeScript"> import { CookieService } from &#39;ngx-cookie&#39;;
</code></pre>
</li>
<li><p>Update the constructor to inject the CookieService</p>
<pre><code class="lang-TypeScript"> constructor(private http: Http, private cookieService: CookieService) {}
</code></pre>
</li>
<li><p>Add a class level variable to store the name of the cookie and set it to currentUser</p>
<pre><code class="lang-TypeScript"> private cookieKey: string = &quot;currentUser&quot;;
</code></pre>
</li>
<li><p>Add the following functions to get/set the cookie to the AuthService class</p>
<pre><code class="lang-TypeScript"> getUser(): User {
     return &lt;User&gt;this.cookieService.getObject(this.cookieKey)
 }

 private setUser(value: User): void {
     this.cookieService.putObject(this.cookieKey, value);
 }

 private clearUser() : void {
     this.cookieService.remove(this.cookieKey);
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Setting Cookie
</h4>

<ol>
<li><p>In the auth.service.ts file, in the login, signup, and isAuthenticated functions, add a call to setUser before the return Observable.of(true) statement</p>
<pre><code class="lang-TypeScript"> this.setUser(&lt;User&gt;res.json());
</code></pre>
</li>
<li><p>In the login and isAuthenticated functions, before the Observable.of(false) in both the result and catch section add to clearUser since the login was invalid and we want to clear out any existing user cookie</p>
<pre><code class="lang-TypeScript"> this.clearUser();
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Display logged in user
</h4>

<ol>
<li><p>Open header.component.ts</p>
<pre><code class="lang-bash"> header.component.ts
</code></pre>
</li>
<li><p>Import the AuthService so that we can call the getUser function</p>
<pre><code class="lang-TypeScript"> import { AuthService } from &#39;../services/auth.service&#39;;
</code></pre>
</li>
<li><p>Add the AuthService to the constructor</p>
<pre><code class="lang-TypeScript"> constructor(private authService: AuthService) { }
</code></pre>
</li>
<li><p>Open the src\app\shared\header\header.component.html</p>
<pre><code class="lang-bash"> header.component.html
</code></pre>
</li>
<li><p>Inside of the <code>&lt;div class=&quot;collapse navbar-collapse&quot;....</code> tag add the following after the closing <code>&lt;/ul&gt;</code></p>
<pre><code class="lang-html"> &lt;ul class=&quot;nav navbar-nav&quot;&gt;
     &lt;li class=&quot;nav-item&quot;&gt;
         &lt;span class=&quot;nav-link&quot;&gt;Welcome {{(authService.getUser())?.email}}&lt;/span&gt;
     &lt;/li&gt;
 &lt;/ul&gt;
</code></pre>
<ul>
<li>This code will display a Welcome along with the email if it is populated.  </li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="logout-user">Logout User</h3>
<p>Before being able to signup for an account, we need the user to be logged out first.</p>
<p>There are a number of ways that you could implement this such as giving a logout button in the header or showing user info in header with link to profile page with a logout button.</p>
<p>We are going to implement the logout button in the header.  </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create AuthService Logout 
</h4>

<ol>
<li><p>Open the auth.service.ts file</p>
<pre><code class="lang-bash"> auth.service.ts
</code></pre>
</li>
<li><p>Add the logout function below that will call the API logout function and clear out the cookie</p>
<pre><code class="lang-TypeScript"> logout(): Observable&lt;boolean&gt; {
     return this.http.get(`${this.url}/logout`, this.options)
     .map((res: Response) =&gt; {
       this.clearUser();

       if (res.ok) {
         return Observable.of(true);
       }

       return Observable.of(false);
     })
     .catch(error =&gt; {
         console.log(&#39;logout error&#39;, error)
         this.clearUser();
         return Observable.of(false);
      });
 }
</code></pre>
</li>
</ol>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Logout Button
</h4>

<ol>
<li><p>Open the src\app\shared\header\header.component.html</p>
<pre><code class="lang-bash"> header.component.html
</code></pre>
</li>
<li><p>After the &quot;Welcome&quot; span tag add the following link tag to call the logout service.  Also, only show the button if the user is logged in.</p>
<pre><code class="lang-html"> &lt;a [hidden]=&quot;!authService.getUser()&quot; (click)=&quot;logout()&quot;&gt; | Logout&lt;/a&gt;
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add Component Logging Out Function
</h4>

<ol>
<li><p>Open header.component.ts</p>
<pre><code class="lang-bash"> header.component.ts
</code></pre>
</li>
<li><p>Import the AuthService and Router</p>
<pre><code class="lang-TypeScript"> import { Router } from &#39;@angular/router&#39;;
</code></pre>
</li>
<li><p>Add the Router to the constructor</p>
<pre><code class="lang-TypeScript"> constructor(private authService: AuthService, private router: Router) { }
</code></pre>
</li>
<li><p>Add the logout function</p>
<pre><code class="lang-TypeScript"> logout() {
     this.authService.logout().subscribe(() =&gt; {
         this.router.navigate([&#39;/login&#39;]);
     });
 }
</code></pre>
</li>
<li><p>You are now ready to test it.</p>
</li>
</ol>
<div class="exercise-end"></div>


				</div>

				<hr>
				<div class="chapter">
					<h3 id="completed-code">Completed Code</h3>
<p>If you want to get the completed code you can download it from Github</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Downloading Code 
</h4>

<ol>
<li>Downloading and extracting the zip file into your projects folder (c:\projects or ~/projects) at <a href="https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-additional-login.zip">https://github.com/digitaldrummerj/angular-tutorial-code/archive/chapter-additional-login.zip</a> </li>
<li><p>After you get the code, run npm install to get all of the NPM dependencies.</p>
<pre><code class="lang-bash"> npm install
</code></pre>
</li>
<li><p>Open Visual Studio Code</p>
</li>
<li>In Visual Studio Code, go under the File menu, select Open folder and navigate to the folder that you unzipped the files into</li>
<li>If you have ng serve running in a different editor, make sure to stop it from running.</li>
<li><p>Open the Integrated Terminal in Visual Studio Code (ctrl + `)  and run ng serve</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>


<h2 id="thank-you">Thank you</h2>
<p>I hope that you enjoyed going through this tutorial.  If you have any questions, please hit me up on twitter <a href="https://twitter.com/digitaldrummerj">@digitaldrummerj</a>.  </p>

				</div>

				<hr>
				<!--<div class="chapter">
					<h2 id="tags-for-creating-tutorial">Tags For Creating Tutorial</h2>
<h3 id="exercises">Exercises</h3>
<h4 class="exercise-start">
  <b>Exercise</b>: Title
</h4>

<p>Details Here</p>
<div class="exercise-end"></div>

<pre><code class="lang-html">&lt;h4 class=&quot;exercise-start&quot;&gt;
  &lt;b&gt;Exercise&lt;/b&gt;: 
&lt;/h4&gt;

&lt;div class=&quot;exercise-end&quot;&gt;&lt;/div&gt;
</code></pre>
<h3 id="alerts">Alerts</h3>
<p>Bootstrap based alerts</p>
<h4 id="danger">Danger</h4>
<div class="alert alert-danger" role="alert">
Danger
</div>

<pre><code class="lang-html">&lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;

&lt;/div&gt;
</code></pre>
<h4 id="warning">Warning</h4>
<div class="alert alert-warning" role="alert">
Warning
</div>

<pre><code class="lang-html">&lt;div class=&quot;alert alert-warning&quot; role=&quot;alert&quot;&gt;

&lt;/div&gt;
</code></pre>
<h4 id="info">Info</h4>
<div class="alert alert-info" role="alert">
Info
</div>

<pre><code class="lang-html">&lt;div class=&quot;alert alert-info&quot; role=&quot;alert&quot;&gt;

&lt;/div&gt;
</code></pre>

				</div>
				<hr>-->
			</div>
		</div>
	</div>

	<script src="scripts/built.js"></script>

</body>

</html>
